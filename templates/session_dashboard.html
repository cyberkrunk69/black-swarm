```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .timestamp { font-size: 0.9em; color: #555; }
    </style>
    <script>
        const ws = new WebSocket(`ws://${location.host}:8765`);
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            renderDashboard(data.sessions);
        };
        ws.onopen = () => console.log('WebSocket connected');
        ws.onclose = () => console.log('WebSocket closed');

        function renderDashboard(sessions) {
            const tbody = document.getElementById('sessions-body');
            tbody.innerHTML = '';
            sessions.forEach(s => {
                const tr = document.createElement('tr');

                const ipTd = document.createElement('td');
                ipTd.textContent = s.ip_address;
                tr.appendChild(ipTd);

                const createdTd = document.createElement('td');
                createdTd.textContent = new Date(s.created_at * 1000).toLocaleString();
                tr.appendChild(createdTd);

                const lastTd = document.createElement('td');
                lastTd.textContent = new Date(s.last_active_at * 1000).toLocaleString();
                tr.appendChild(lastTd);

                const tasksTd = document.createElement('td');
                tasksTd.innerHTML = s.tasks.map(t => `<div class="timestamp">${new Date(t.timestamp * 1000).toLocaleTimeString()}</div>${t.description}`).join('<hr>');
                tr.appendChild(tasksTd);

                const netTd = document.createElement('td');
                netTd.innerHTML = s.network_activity.map(n => `<div class="timestamp">${new Date(n.timestamp * 1000).toLocaleTimeString()}</div>${n.activity}`).join('<hr>');
                tr.appendChild(netTd);

                tbody.appendChild(tr);
            });
        }
    </script>
</head>
<body>
    <h1>LAN Session Dashboard</h1>
    <table>
        <thead>
            <tr>
                <th>IP Address</th>
                <th>Created At</th>
                <th>Last Active At</th>
                <th>Your Tasks</th>
                <th>Network Activity</th>
            </tr>
        </thead>
        <tbody id="sessions-body">
            <!-- Filled dynamically by WebSocket messages -->
        </tbody>
    </table>
</body>
</html>
```
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .timestamp { font-size: 0.9em; color: #555; }
    </style>
</head>
<body>
    <h1>LAN Session Dashboard</h1>
    <table id="sessions-table">
        <thead>
            <tr>
                <th>IP Address</th>
                <th>Last Activity</th>
                <th>Your Tasks</th>
                <th>Network Activity</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const ws = new WebSocket(`ws://${location.host}/ws/sessions`);

        function formatTime(ts) {
            const d = new Date(ts * 1000);
            return d.toLocaleString();
        }

        function renderSession(session) {
            const tr = document.createElement('tr');
            tr.id = `session-${session.ip}`;

            const ipTd = document.createElement('td');
            ipTd.textContent = session.ip;
            tr.appendChild(ipTd);

            const lastTd = document.createElement('td');
            lastTd.textContent = formatTime(session.last_activity);
            tr.appendChild(lastTd);

            const tasksTd = document.createElement('td');
            tasksTd.innerHTML = session.tasks.map(t => `<div>${t}</div>`).join('');
            tr.appendChild(tasksTd);

            const netTd = document.createElement('td');
            netTd.innerHTML = session.network_activity.map(n => `<div>${n}</div>`).join('');
            tr.appendChild(netTd);

            return tr;
        }

        function upsertRow(session) {
            const tbody = document.querySelector('#sessions-table tbody');
            const existing = document.getElementById(`session-${session.ip}`);
            const newRow = renderSession(session);
            if (existing) {
                tbody.replaceChild(newRow, existing);
            } else {
                tbody.appendChild(newRow);
            }
        }

        function removeRow(ip) {
            const row = document.getElementById(`session-${ip}`);
            if (row) row.remove();
        }

        ws.onmessage = (event) => {
            const msg = JSON.parse(event.data);
            if (msg.type === 'snapshot') {
                // Full refresh
                const tbody = document.querySelector('#sessions-table tbody');
                tbody.innerHTML = '';
                msg.sessions.forEach(upsertRow);
            } else if (msg.type === 'session_update') {
                upsertRow(msg.session);
            } else if (msg.type === 'session_removed') {
                removeRow(msg.ip);
            }
        };

        ws.onclose = () => {
            console.warn('WebSocket closed – dashboard will stop receiving updates.');
        };
    </script>
</body>
</html>
```
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .session { border: 1px solid #ccc; padding: 10px; margin-bottom: 15px; }
        .section { margin-top: 8px; }
        .section h4 { margin: 4px 0; }
        pre { background:#f8f8f8; padding:8px; overflow:auto; }
    </style>
</head>
<body>
    <h1>LAN Session Dashboard</h1>
    <div id="sessions"></div>

    <script>
        const ws = new WebSocket(`ws://${location.host}:8765`);
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            const container = document.getElementById('sessions');
            container.innerHTML = '';

            for (const [ip, sess] of Object.entries(data)) {
                const div = document.createElement('div');
                div.className = 'session';
                div.innerHTML = `
                    <strong>IP:</strong> ${ip}<br/>
                    <strong>Last Active:</strong> ${new Date(sess.last_active * 1000).toLocaleString()}<br/>

                    <div class="section">
                        <h4>Your tasks</h4>
                        <pre>${JSON.stringify(sess.tasks, null, 2)}</pre>
                    </div>

                    <div class="section">
                        <h4>Network activity</h4>
                        <pre>${JSON.stringify(sess.network, null, 2)}</pre>
                    </div>
                `;
                container.appendChild(div);
            }
        };

        ws.onclose = () => {
            const container = document.getElementById('sessions');
            container.innerHTML = '<p><em>WebSocket connection closed.</em></p>';
        };
    </script>
</body>
</html>
```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        .section-title { margin-top: 30px; font-size: 1.2em; }
    </style>
</head>
<body>
    <h1>LAN Session Dashboard</h1>

    <div id="sessions"></div>

    <script>
        const sessionsDiv = document.getElementById('sessions');
        const ws = new WebSocket(`ws://${location.host}/ws/sessions`);

        // Helper to render sessions
        function render(sessions) {
            let html = '';
            sessions.forEach(sess => {
                html += `<div class="session-block">
                    <h2>IP: ${sess.ip}</h2>
                    <p>Last Active: ${new Date(sess.last_active).toLocaleString()}</p>

                    <div class="section-title">Your tasks</div>
                    <table>
                        <tr><th>Timestamp</th><th>Details</th></tr>
                        ${sess.tasks.map(t => `<tr><td>${t.timestamp}</td><td>${JSON.stringify(t)}</td></tr>`).join('')}
                    </table>

                    <div class="section-title">Network activity</div>
                    <table>
                        <tr><th>Timestamp</th><th>Details</th></tr>
                        ${sess.network_activity.map(n => `<tr><td>${n.timestamp}</td><td>${JSON.stringify(n)}</td></tr>`).join('')}
                    </table>
                </div>`;
            });
            sessionsDiv.innerHTML = html;
        }

        // Initial load via HTTP (in case WebSocket takes time)
        fetch('/sessions/snapshot')
            .then(r => r.json())
            .then(render)
            .catch(console.error);

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            render(data);
        };

        ws.onclose = () => {
            console.warn('WebSocket closed. Reloading page in 5 seconds...');
            setTimeout(() => location.reload(), 5000);
        };
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
<h1>Active LAN Sessions</h1>
<table id="sessions-table">
    <thead>
        <tr>
            <th>IP</th>
            <th>Created</th>
            <th>Last Active</th>
            <th># Tasks</th>
            <th># Network Events</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
    const ws = new WebSocket(`ws://${location.host}/ws/sessions`);
    ws.onmessage = (event) => {
        const sessions = JSON.parse(event.data);
        const tbody = document.querySelector('#sessions-table tbody');
        tbody.innerHTML = '';
        sessions.forEach(sess => {
            const tr = document.createElement('tr');
            const created = new Date(sess.created_at * 1000).toLocaleString();
            const last = new Date(sess.last_active * 1000).toLocaleString();
            tr.innerHTML = `
                <td>${sess.ip}</td>
                <td>${created}</td>
                <td>${last}</td>
                <td>${sess.tasks.length}</td>
                <td>${sess.network_activity.length}</td>
            `;
            tbody.appendChild(tr);
        });
    };
    ws.onclose = () => console.log('WebSocket closed');
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin-bottom: 20px; }
        .log { max-height: 300px; overflow-y: auto; background: #f9f9f9; padding: 10px; border: 1px solid #ddd; }
        .log-entry { margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>Session Dashboard – <span id="client-ip"></span></h1>

    <div class="section">
        <h2>Your Tasks</h2>
        <div id="tasks" class="log"></div>
    </div>

    <div class="section">
        <h2>Network Activity</h2>
        <div id="network" class="log"></div>
    </div>

    <script>
        // Extract client IP from URL (expects /dashboard/{ip})
        const ip = window.location.pathname.split('/').pop();
        document.getElementById('client-ip').textContent = ip;

        const tasksDiv = document.getElementById('tasks');
        const networkDiv = document.getElementById('network');

        const ws = new WebSocket(`ws://${window.location.host}/ws/${ip}`);

        ws.onmessage = (event) => {
            const msg = JSON.parse(event.data);
            if (msg.type === 'snapshot') {
                renderSnapshot(msg.data);
            } else if (msg.type === 'task') {
                appendLog(tasksDiv, msg.data);
            } else if (msg.type === 'network') {
                appendLog(networkDiv, msg.data);
            }
        };

        function renderSnapshot(data) {
            tasksDiv.innerHTML = '';
            networkDiv.innerHTML = '';
            data.tasks.forEach(entry => appendLog(tasksDiv, entry));
            data.network_activity.forEach(entry => appendLog(networkDiv, entry));
        }

        function appendLog(container, entry) {
            const el = document.createElement('div');
            el.className = 'log-entry';
            const time = new Date(entry.timestamp).toLocaleTimeString();
            if (entry.description) {
                el.textContent = `[${time}] ${entry.description}`;
            } else {
                el.textContent = `[${time}] ${entry.direction.toUpperCase()}: ${JSON.stringify(entry.payload)}`;
            }
            container.appendChild(el);
            container.scrollTop = container.scrollHeight;
        }

        ws.onclose = () => {
            const notice = document.createElement('div');
            notice.textContent = 'WebSocket connection closed.';
            notice.style.color = 'red';
            document.body.appendChild(notice);
        };
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        .task { color: green; }
        .network { color: blue; }
    </style>
</head>
<body>
    <h1>LAN Session Dashboard</h1>
    <table id="session-table">
        <thead>
            <tr>
                <th>IP Address</th>
                <th>Last Active</th>
                <th>Activities</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const ws = new WebSocket(`ws://${location.hostname}:8765`);
        const tableBody = document.querySelector('#session-table tbody');

        function formatTimestamp(ts) {
            const d = new Date(ts * 1000);
            return d.toLocaleString();
        }

        function renderSessions(sessions) {
            tableBody.innerHTML = '';
            sessions.forEach(sess => {
                const tr = document.createElement('tr');

                const ipTd = document.createElement('td');
                ipTd.textContent = sess.ip;
                tr.appendChild(ipTd);

                const lastTd = document.createElement('td');
                lastTd.textContent = formatTimestamp(sess.last_active);
                tr.appendChild(lastTd);

                const actTd = document.createElement('td');
                sess.activities.forEach(act => {
                    const span = document.createElement('span');
                    span.className = act.category;
                    span.textContent = `[${formatTimestamp(act.timestamp)}] (${act.category}) ${act.description}`;
                    actTd.appendChild(span);
                    actTd.appendChild(document.createElement('br'));
                });
                tr.appendChild(actTd);

                tableBody.appendChild(tr);
            });
        }

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'snapshot' || data.type === 'update') {
                renderSessions(data.sessions);
            }
        };

        ws.onopen = () => console.log('WebSocket connected to SessionManager');
        ws.onclose = () => console.log('WebSocket disconnected');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .session { border: 1px solid #ccc; padding: 10px; margin-bottom: 15px; }
        .log { max-height: 150px; overflow-y: auto; background:#f9f9f9; padding:5px; }
        .section { margin-top: 8px; }
        .section h4 { margin: 4px 0; }
    </style>
</head>
<body>
<h1>LAN Session Dashboard</h1>
<div id="sessions"></div>

<script>
    const ws = new WebSocket(`ws://${location.host}:8765`);
    const sessionsDiv = document.getElementById('sessions');

    function renderSession(session) {
        const container = document.createElement('div');
        container.className = 'session';
        container.id = `session-${session.ip}`;

        const header = document.createElement('h3');
        header.textContent = `IP: ${session.ip} (last active: ${new Date(session.last_active).toLocaleTimeString()})`;
        container.appendChild(header);

        const tasksDiv = document.createElement('div');
        tasksDiv.className = 'section';
        tasksDiv.innerHTML = '<h4>Your tasks</h4>';
        const tasksLog = document.createElement('div');
        tasksLog.className = 'log';
        session.tasks.forEach(t => {
            const p = document.createElement('p');
            p.textContent = `[${new Date(t.timestamp).toLocaleTimeString()}] ${t.description}`;
            tasksLog.appendChild(p);
        });
        tasksDiv.appendChild(tasksLog);
        container.appendChild(tasksDiv);

        const netDiv = document.createElement('div');
        netDiv.className = 'section';
        netDiv.innerHTML = '<h4>Network activity</h4>';
        const netLog = document.createElement('div');
        netLog.className = 'log';
        session.network.forEach(n => {
            const p = document.createElement('p');
            p.textContent = `[${new Date(n.timestamp).toLocaleTimeString()}] ${n.direction}: ${JSON.stringify(n.payload)}`;
            netLog.appendChild(p);
        });
        netDiv.appendChild(netLog);
        container.appendChild(netDiv);

        return container;
    }

    function updateOrCreate(session) {
        const existing = document.getElementById(`session-${session.ip}`);
        const newElem = renderSession(session);
        if (existing) {
            sessionsDiv.replaceChild(newElem, existing);
        } else {
            sessionsDiv.appendChild(newElem);
        }
    }

    ws.onmessage = (event) => {
        const msg = JSON.parse(event.data);
        if (msg.type === 'snapshot') {
            sessionsDiv.innerHTML = '';
            msg.sessions.forEach(updateOrCreate);
        } else if (msg.type === 'update') {
            updateOrCreate(msg.session);
        }
    };

    ws.onclose = () => {
        console.warn('WebSocket connection closed.');
    };
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LAN Session Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h2 { margin-top: 30px; }
        .log { max-height: 300px; overflow-y: auto; background:#f9f9f9; padding:10px; border:1px solid #ddd; }
        .entry { margin-bottom: 5px; }
        .timestamp { color:#555; font-size:0.9em; margin-right:8px; }
    </style>
</head>
<body>
    <h1>Session Dashboard – IP: <span id="client-ip"></span></h1>

    <h2>Your Tasks</h2>
    <div id="tasks-log" class="log"></div>

    <h2>Network Activity</h2>
    <div id="network-log" class="log"></div>

    <script>
        // Extract client IP from query string (e.g., /dashboard.html?ip=192.168.1.10)
        const params = new URLSearchParams(window.location.search);
        const clientIp = params.get('ip') || 'unknown';
        document.getElementById('client-ip').textContent = clientIp;

        const tasksLog = document.getElementById('tasks-log');
        const networkLog = document.getElementById('network-log');

        const ws = new WebSocket(`ws://${window.location.host}/ws/${clientIp}`);

        ws.onmessage = function(event) {
            const data = JSON.parse(event.data);
            if (data.type !== 'update') return;

            const targetDiv = data.category === 'tasks' ? tasksLog : networkLog;
            const entryDiv = document.createElement('div');
            entryDiv.className = 'entry';
            entryDiv.innerHTML = `<span class="timestamp">${data.entry.ts}</span>${data.entry.desc}`;
            targetDiv.appendChild(entryDiv);
            targetDiv.scrollTop = targetDiv.scrollHeight;
        };

        ws.onopen = function() {
            console.log('WebSocket connected for IP', clientIp);
        };
        ws.onclose = function() {
            console.log('WebSocket closed');
        };
    </script>
</body>
</html>