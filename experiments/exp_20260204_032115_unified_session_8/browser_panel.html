<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Experiment Browser Panel</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .exp-item { border: 1px solid #ccc; padding: 10px; margin-bottom: 5px; cursor: pointer; }
        .exp-header { display: flex; justify-content: space-between; }
        .exp-details { margin-top: 5px; display: none; }
        .file-list { margin-left: 20px; }
        .status-success { color: green; }
        .status-fail { color: red; }
        a.diff-link { margin-left: 10px; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>Recent Experiments</h1>
    <div id="experiments"></div>

    <script>
        // Mock data – replace with real API call if needed
        const experiments = [
            {
                timestamp: "2026-02-04 03:21:15",
                folder: "exp_20260204_032115_unified_session_8",
                taskCount: 12,
                filesCreated: 8,
                status: "success",
                files: ["main.py", "config.yaml", "results.json"],
                diffUrl: "#"
            },
            {
                timestamp: "2026-02-03 22:10:04",
                folder: "exp_20260203_221004_test",
                taskCount: 5,
                filesCreated: 3,
                status: "fail",
                files: ["run.sh", "error.log"],
                diffUrl: "#"
            }
        ];

        const container = document.getElementById('experiments');

        experiments.forEach((exp, idx) => {
            const expDiv = document.createElement('div');
            expDiv.className = 'exp-item';
            expDiv.dataset.idx = idx;

            const header = document.createElement('div');
            header.className = 'exp-header';
            header.innerHTML = `
                <span><strong>${exp.timestamp}</strong> – ${exp.folder}</span>
                <span>
                    Tasks: ${exp.taskCount} |
                    Files: ${exp.filesCreated} |
                    Status: <span class="${exp.status === 'success' ? 'status-success' : 'status-fail'}">${exp.status}</span>
                    <a href="${exp.diffUrl}" class="diff-link">View Diff</a>
                </span>
            `;

            const details = document.createElement('div');
            details.className = 'exp-details';
            const fileList = document.createElement('ul');
            fileList.className = 'file-list';
            exp.files.forEach(f => {
                const li = document.createElement('li');
                li.textContent = f;
                fileList.appendChild(li);
            });
            details.appendChild(fileList);

            expDiv.appendChild(header);
            expDiv.appendChild(details);
            container.appendChild(expDiv);

            // Toggle expand/collapse
            header.addEventListener('click', () => {
                details.style.display = details.style.display === 'none' ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>