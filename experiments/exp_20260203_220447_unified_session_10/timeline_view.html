<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Parallel Execution Timeline</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        #chart { width: 100vw; height: 100vh; }
    </style>
</head>
<body>
<div id="chart"></div>

<script>
// Sample data – replace with actual task data via fetch or server‑side injection.
const tasks = [
    {name: "Task A", start: "2026-02-04 09:00", finish: "2026-02-04 09:30", worker: "Worker 1", origin: "module_a.py"},
    {name: "Task B", start: "2026-02-04 09:10", finish: "2026-02-04 09:45", worker: "Worker 2", origin: "module_b.py"},
    {name: "Task C", start: "2026-02-04 09:35", finish: "2026-02-04 10:00", worker: "Worker 1", origin: "module_c.py"},
    // ... more tasks
];

// Generate a color map based on file origin
const originSet = [...new Set(tasks.map(t => t.origin))];
const colors = Plotly.d3.schemeCategory10;
const originColor = {};
originSet.forEach((origin, i) => {
    originColor[origin] = colors[i % colors.length];
});

const data = tasks.map(t => ({
    x: [t.start, t.finish],
    y: [t.worker, t.worker],
    mode: 'lines',
    line: {color: originColor[t.origin], width: 20},
    name: t.name,
    hoverinfo: 'text',
    text: `Task: ${t.name}<br>Origin: ${t.origin}<br>Start: ${t.start}<br>End: ${t.finish}`
}));

const layout = {
    title: 'Parallel Execution Timeline',
    xaxis: {
        title: 'Time',
        type: 'date',
        rangeslider: {visible: true},
        showgrid: true
    },
    yaxis: {
        title: 'Worker Slot',
        automargin: true,
        type: 'category',
        categoryorder: 'array',
        categoryarray: [...new Set(tasks.map(t => t.worker))]
    },
    hovermode: 'closest',
    showlegend: false,
    margin: {l: 120, r: 40, t: 50, b: 40}
};

Plotly.newPlot('chart', data, layout, {responsive: true});
</script>
</body>
</html>