/* Scaled Trees CSS
 *
 * Provides a central transform origin and smooth scaling transitions.
 * Uses the --anim-normal CSS variable for timing (e.g., "0.3s ease").
 * Ensures readability at the minimum scale by enforcing a minimum
 * font size and line height.
 */

/* Base class for any tree element that should scale */
.scaled-tree {
  /* Scale transformations pivot around the center of the element */
  transform-origin: center;

  /* Smooth scaling transition using the project's animation timing variable */
  transition: transform var(--anim-normal);

  /* Ensure text remains readable even when the element is scaled down */
  /* The min() function caps the reduction of font-size at 0.8rem (or any desired minimum). */
  font-size: min(1rem, calc(1rem * var(--scale, 1)));
  line-height: min(1.5, calc(1.5 * var(--scale, 1)));

  /* Optional: preserve 3D rendering context for smoother scaling */
  transform-style: preserve-3d;
}

/* Example usage: apply a CSS custom property to control scale */
.scaled-tree[data-scale] {
  --scale: attr(data-scale number);
  transform: scale(var(--scale));
}

/* Fallback for browsers that don't support attr() in CSS */
@supports not (attr(data-scale number)) {
  .scaled-tree[data-scale] {
    /* No automatic scaling; developers should set the --scale variable manually */
  }
}