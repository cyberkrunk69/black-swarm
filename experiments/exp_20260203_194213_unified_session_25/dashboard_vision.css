:root {
    /* Timing */
    --anim-fast: 150ms;
    --anim-normal: 250ms;
    --anim-slow: 350ms;

    /* Easing */
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-snap: cubic-bezier(0.55, 0.055, 0.675, 0.19);

    /* Layout */
    --node-gap: 24px;
    --dashboard-width: 320px;
}

/* GLOBAL */
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: system-ui, sans-serif; background:#fafafa; color:#222; overflow:hidden; }
button { cursor:pointer; }

/* HEADER */
.header {
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 24px; background:#fff; border-bottom:1px solid #e0e0e0;
}
.logo { font-size:1.5rem; }
.autonomy-toggle { padding:6px 12px; background:#ff9800; color:#fff; border:none; border-radius:4px; }

/* MAIN */
.main { position:relative; height:calc(100vh - 112px); display:flex; }
.canvas {
    flex:1; position:relative; overflow:hidden;
    background:linear-gradient(135deg, #f5f7fa, #c3cfe2);
}
.connections {
    position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;
}

/* HISTORY DASHBOARD */
.history {
    width:var(--dashboard-width); background:#fff; border-left:1px solid #e0e0e0;
    display:flex; flex-direction:column; transition:transform var(--anim-fast) var(--ease-snap);
    transform:translateX(0);
}
.history.collapsed { transform:translateX(calc(var(--dashboard-width) - 40px)); }
.history-toggle {
    background:#1976d2; color:#fff; border:none; padding:8px; width:40px;
    writing-mode:vertical-rl; text-orientation:upright;
}
.history-content { flex:1; overflow-y:auto; padding:12px; }
.history-content h2 { margin-bottom:8px; font-size:1rem; }
.history-content ul { list-style:none; }
.history-content li { padding:4px 0; border-bottom:1px solid #eee; }

/* INPUT BAR */
.input-bar {
    display:flex; align-items:center; padding:12px 24px;
    background:#fff; border-top:1px solid #e0e0e0;
}
.input-bar input {
    flex:1; padding:8px 12px; border:1px solid #ccc; border-radius:4px;
}
.input-bar button { margin-left:8px; padding:8px 12px; border:none; border-radius:4px; }
.send-btn { background:#4caf50; color:#fff; }
.mic-btn { background:#2196f3; color:#fff; }

/* NODE STYLES */
.node {
    position:absolute; width:48px; height:48px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    color:#fff; font-size:0.8rem; user-select:none;
    transition:
        transform var(--anim-normal) var(--ease-bounce),
        opacity var(--anim-normal) var(--ease-snap);
}
.node.indigo   { background:#6366f1; }   /* Understanding */
.node.purple   { background:#8b5cf6; }   /* Worker */
.node.cyan     { background:#06b6d4; }   /* Helper */
.node.amber    { background:#f59e0b; }   /* Expert */

/* RAINBOW BORDER */
.rainbow {
    border:4px solid transparent;
    background:linear-gradient(45deg, red, orange, yellow, green, cyan, blue, violet) border-box;
    -webkit-mask:
        linear-gradient(#fff 0 0) padding-box,
        linear-gradient(#fff 0 0);
    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
    animation: rainbowBorder 3s linear infinite;
}
@keyframes rainbowBorder {
    0%   { background-position:0% 50%; }
    100% { background-position:400% 50%; }
}

/* COLLAPSE ANIMATION */
.collapse {
    opacity:0;
    transform:scale(0) translate(var(--collapse-x,0), var(--collapse-y,0));
}