{
  "id": "web-vitals__articles_serve-modern-code-to-modern-browsers",
  "source_id": "web-vitals",
  "source_name": "Web Vitals",
  "category": "performance",
  "url": "https://web.dev/articles/serve-modern-code-to-modern-browsers",
  "title": "Serve modern code to modern browsers for faster page loadsStay organized with collectionsSave and categorize content based on your preferences.",
  "content": "Home\nArticles\nServe modern code to modern browsers for faster page loads\nStay organized with collections\nSave and categorize content based on your preferences.\nHoussein Djirdeh\nBuilding websites that work well on all major browsers is a core tenet of an\nopen web ecosystem. However, this means additional work of ensuring that all of\nthe code you write is supported in each browser that you plan to target. If you\nwant to use new JavaScript language features, you need to transpile these\nfeatures to backwards-compatible formats for browsers that do not yet support\nthem.\nBabel\nis the most widely used tool to compile code\nthat contains newer syntax into code that different browsers and environments\n(such as Node) can understand. This guide assumes you are using Babel, so you\nneed to follow the\nsetup instructions\nto\ninclude it into your application if you haven't already. Select\nwebpack\nin\nBuild Systems\nif you are using webpack as the module bundler in your app.\nTo use Babel to only transpile what is needed for your users, you\nneed to:\nIdentify which browsers you want to target.\nUse\n@babel/preset-env\nwith appropriate browser targets.\nUse\n<script type=\"module\">\nto stop sending transpiled code to browsers that don't need it.\nIdentify which browsers you want to target\nBefore you begin to modify how the code in your application is transpiled, you\nneed to identify which browsers access your application. Analyze which browsers\nyour users are currently using as well as those that you plan to target to make an\ninformed decision.\nUse @babel/preset-env\nTranspiling code usually results in a file that is larger in file size than\ntheir original forms. By minimizing the amount of compilation that you do you\ncan reduce the size of your bundles to improve the performance of a web page.\nInstead of including specific plugins to selectively compile certain language\nfeatures you are using, Babel provides a number of presets that bundles plugins\ntogether. Use\n@babel/preset-env\nto only include the transforms and polyfills needed for the browsers you plan on\ntargeting.\nInclude\n@babel/preset-env\nwithin the\npresets\narray in your Babel\nconfigurations file,\n.babelrc\n:\n{\n\"presets\"\n:\n[\n[\n\"@babel/preset-env\"\n,\n{\n\"targets\"\n:\n\">0.25%\"\n}\n]\n]\n}\nUse the\ntargets\nfield to specify which browser versions you want to include\nby adding an appropriate query to the\nbrowsers\nfield.\n@babel/preset-env\nintegrates with browserslist, an open-source configuration shared between different\ntools for targeting browsers. A full list of compatible queries is in the\nbrowserslist documentation\n.\nAnother option is to use a\n.browserslistrc\nfile to list the environments\nyou wish to target.\nThe\n\">0.25%\"\nvalue tells Babel to only include the transforms\nneeded to support browsers that make up more than 0.25% of global\nusage. This ensures your bundle does not contain unnecessary transpiled\ncode for browsers that are used by a very small percentage of users.\nIn most cases, this is a better approach than using the following\nconfiguration:\n\"targets\"\n:\n\"last 2 versions\"\nThe\n\"last 2 versions\"\nvalue transpiles your code for the\nlast two versions\nof every browser,\nwhich means support is provided for discontinued browsers such as Internet Explorer.\nThis can unnecessarily increase the size of your bundle if you do not expect these\nbrowsers to be used to access your application.\nUltimately, you should select the appropriate combination of queries to only\ntarget browsers that fit your needs.\nEnable modern bugfixes\n@babel/preset-env\ngroups multiple JavaScript syntax features into collections and enables/disables\nthem based on the target browsers specified. Although this works well, an entire collection of\nsyntax features is transformed when a targeted browser contains a bug with just a single feature.\nThis often results in more transformed code than is necessary.\nOriginally developed as a\nseparate preset\n, the\nbugfixes option\nin\n@babel/preset-env\nsolves this problem by converting modern syntax that is broken in some browsers to the closest\nequivalent syntax that is not broken in those browsers. The result is nearly identical modern code\nwith a few small syntax tweaks that guarantee compatibility in all target browsers. To use this\noptimization, make sure you have\n@babel/preset-env\n7.10 or later installed, then set the\nbugfixes\nproperty to\ntrue\n:\n{\n\"presets\"\n:\n[\n[\n\"@babel/preset-env\"\n,\n{\n\"bugfixes\"\n:\ntrue\n}\n]\n]\n}\nIn Babel 8, the\nbugfixes\noption will be enabled by default.\nUse\n<script type=\"module\">\nJavaScript modules, or ES modules, are a relatively new feature supported in\nall major browsers\n. You can use modules\nto create scripts that can import and export from other modules, but you can\nalso use them with\n@babel/preset-env\nto only target browsers that support\nthem.\nInstead of querying for specific browser versions or market share, consider\nspecifying\n\"esmodules\" : true\ninside your\n.babelrc\nfile's\ntargets\nfield.\n{\n\"presets\"\n:[\n[\n\"@babel/preset-env\"\n,\n{\n\"targets\"\n:{\n\"esmodules\"\n:\ntrue\n}\n}\n]\n]\n}\nMany newer ECMAScript features compiled with Babel are already supported\nin environments that support JavaScript modules. So by doing this, you\nsimplify the process of making sure that only transpiled code is used\nfor browsers that actually need it.\nBrowsers that support modules ignore scripts with a\nnomodule\nattribute.\nConversely, browsers that do not support modules ignore script elements with\ntype=\"module\"\n. This means you can include a module as well as a compiled fallback.\nIdeally, the two version scripts of an application are included like this:\n<script type=\"module\" src=\"main.mjs\"></script>\n  <script nomodule src=\"compiled.js\" defer></script>\nBrowsers that support modules fetch and execute\nmain.mjs\nand ignore\ncompiled.js\n.\nThe browsers that do not support modules do the opposite.\nIf you use webpack, you can set different targets in your configurations for two\nseparate versions of your application:\nA version only for browsers that support modules.\nA version that includes a compiled script which works in any legacy browser. This has a larger file size, since transpilation needs to support a wider range of browsers.\nWith thanks to Connor Clark and Jason Miller for their reviews.\nExcept as otherwise noted, the content of this page is licensed under the\nCreative Commons Attribution 4.0 License\n, and code samples are licensed under the\nApache 2.0 License\n. For details, see the\nGoogle Developers Site Policies\n. Java is a registered trademark of Oracle and/or its affiliates.\nLast updated 2018-11-05 UTC.",
  "content_markdown": "- [Home](https://web.dev/)\n- [Articles](https://web.dev/articles)\n\n# Serve modern code to modern browsers for faster page loads Stay organized with collections Save and categorize content based on your preferences.\n\n![Houssein Djirdeh](https://web.dev/images/authors/houssein.jpg)\n\nHoussein Djirdeh\n\nBuilding websites that work well on all major browsers is a core tenet of an\nopen web ecosystem. However, this means additional work of ensuring that all of\nthe code you write is supported in each browser that you plan to target. If you\nwant to use new JavaScript language features, you need to transpile these\nfeatures to backwards-compatible formats for browsers that do not yet support\nthem.\n\n[Babel](https://babeljs.io/docs/en) is the most widely used tool to compile code\nthat contains newer syntax into code that different browsers and environments\n(such as Node) can understand. This guide assumes you are using Babel, so you\nneed to follow the [setup instructions](https://babeljs.io/setup) to\ninclude it into your application if you haven't already. Select `webpack`\nin `Build Systems` if you are using webpack as the module bundler in your app.\n\nTo use Babel to only transpile what is needed for your users, you\nneed to:\n\n1. Identify which browsers you want to target.\n2. Use `@babel/preset-env` with appropriate browser targets.\n3. Use `<script type=\"module\">` to stop sending transpiled code to browsers that don't need it.\n\n## Identify which browsers you want to target\n\nBefore you begin to modify how the code in your application is transpiled, you\nneed to identify which browsers access your application. Analyze which browsers\nyour users are currently using as well as those that you plan to target to make an\ninformed decision.\n\n## Use @babel/preset-env\n\nTranspiling code usually results in a file that is larger in file size than\ntheir original forms. By minimizing the amount of compilation that you do you\ncan reduce the size of your bundles to improve the performance of a web page.\n\nInstead of including specific plugins to selectively compile certain language\nfeatures you are using, Babel provides a number of presets that bundles plugins\ntogether. Use [@babel/preset-env](https://babeljs.io/docs/en/babel-preset-env)\nto only include the transforms and polyfills needed for the browsers you plan on\ntargeting.\n\nInclude `@babel/preset-env` within the `presets` array in your Babel\nconfigurations file, `.babelrc`:\n\n```\n{\n \"presets\": [\n   [\n     \"@babel/preset-env\",\n     {\n       \"targets\": \">0.25%\"\n     }\n   ]\n ]\n}\n```\n\nUse the `targets` field to specify which browser versions you want to include\nby adding an appropriate query to the `browsers` field. `@babel/preset-env`\nintegrates with browserslist, an open-source configuration shared between different\ntools for targeting browsers. A full list of compatible queries is in the\n[browserslist documentation](https://github.com/browserslist/browserslist#full-list).\nAnother option is to use a [`.browserslistrc`](https://babeljs.io/docs/en/babel-preset-env#browserslist-integration) file to list the environments\nyou wish to target.\n\nThe `\">0.25%\"` value tells Babel to only include the transforms\nneeded to support browsers that make up more than 0.25% of global\nusage. This ensures your bundle does not contain unnecessary transpiled\ncode for browsers that are used by a very small percentage of users.\n\nIn most cases, this is a better approach than using the following\nconfiguration:\n\n```\n  \"targets\": \"last 2 versions\"\n```\n\nThe `\"last 2 versions\"` value transpiles your code for the\n[last two versions](http://browserl.ist/?q=last+2+versions) of every browser,\nwhich means support is provided for discontinued browsers such as Internet Explorer.\nThis can unnecessarily increase the size of your bundle if you do not expect these\nbrowsers to be used to access your application.\n\nUltimately, you should select the appropriate combination of queries to only\ntarget browsers that fit your needs.\n\n### Enable modern bugfixes\n\n`@babel/preset-env` groups multiple JavaScript syntax features into collections and enables/disables\nthem based on the target browsers specified. Although this works well, an entire collection of\nsyntax features is transformed when a targeted browser contains a bug with just a single feature.\nThis often results in more transformed code than is necessary.\n\nOriginally developed as a [separate preset](https://github.com/babel/preset-modules), the\n[bugfixes option](https://babeljs.io/docs/en/babel-preset-env#bugfixes) in `@babel/preset-env`\nsolves this problem by converting modern syntax that is broken in some browsers to the closest\nequivalent syntax that is not broken in those browsers. The result is nearly identical modern code\nwith a few small syntax tweaks that guarantee compatibility in all target browsers. To use this\noptimization, make sure you have `@babel/preset-env` 7.10 or later installed, then set the\n[`bugfixes`](https://babeljs.io/docs/en/babel-preset-env#bugfixes) property to `true`:\n\n```\n{\n \"presets\": [\n   [\n     \"@babel/preset-env\",\n     {\n       \"bugfixes\": true\n     }\n   ]\n ]\n}\n```\n\nIn Babel 8, the `bugfixes` option will be enabled by default.\n\n## Use `<script type=\"module\">`\n\nJavaScript modules, or ES modules, are a relatively new feature supported in\n[all major browsers](https://caniuse.com/#feat=es6-module). You can use modules\nto create scripts that can import and export from other modules, but you can\nalso use them with `@babel/preset-env` to only target browsers that support\nthem.\n\nInstead of querying for specific browser versions or market share, consider\nspecifying `\"esmodules\" : true` inside your `.babelrc` file's `targets` field.\n\n```\n{\n   \"presets\":[\n      [\n         \"@babel/preset-env\",\n         {\n            \"targets\":{\n               \"esmodules\": true\n            }\n         }\n      ]\n   ]\n}\n```\n\nMany newer ECMAScript features compiled with Babel are already supported\nin environments that support JavaScript modules. So by doing this, you\nsimplify the process of making sure that only transpiled code is used\nfor browsers that actually need it.\n\nBrowsers that support modules ignore scripts with a `nomodule` attribute.\nConversely, browsers that do not support modules ignore script elements with\n`type=\"module\"`. This means you can include a module as well as a compiled fallback.\n\nIdeally, the two version scripts of an application are included like this:\n\n```\n  <script type=\"module\" src=\"main.mjs\"></script>\n  <script nomodule src=\"compiled.js\" defer></script>\n```\n\nBrowsers that support modules fetch and execute `main.mjs` and ignore `compiled.js`.\nThe browsers that do not support modules do the opposite.\n\nIf you use webpack, you can set different targets in your configurations for two\nseparate versions of your application:\n\n- A version only for browsers that support modules.\n- A version that includes a compiled script which works in any legacy browser. This has a larger file size, since transpilation needs to support a wider range of browsers.\n\n*With thanks to Connor Clark and Jason Miller for their reviews.*\n\nExcept as otherwise noted, the content of this page is licensed under the [Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the [Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the [Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.\n\nLast updated 2018-11-05 UTC.\n\n[[[\"Easy to understand\",\"easyToUnderstand\",\"thumb-up\"],[\"Solved my problem\",\"solvedMyProblem\",\"thumb-up\"],[\"Other\",\"otherUp\",\"thumb-up\"]],[[\"Missing the information I need\",\"missingTheInformationINeed\",\"thumb-down\"],[\"Too complicated / too many steps\",\"tooComplicatedTooManySteps\",\"thumb-down\"],[\"Out of date\",\"outOfDate\",\"thumb-down\"],[\"Samples / code issue\",\"samplesCodeIssue\",\"thumb-down\"],[\"Other\",\"otherDown\",\"thumb-down\"]],[\"Last updated 2018-11-05 UTC.\"],[],[]]",
  "tags": [
    "performance",
    "web-vitals",
    "google",
    "optimization"
  ],
  "extracted_at": "2026-02-03T12:49:42.710087+00:00",
  "content_length": 6533,
  "content_hash": "1193798b4680af2d"
}