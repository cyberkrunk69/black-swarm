{
  "id": "mantine__hooks_use-local-storage_",
  "source_id": "mantine",
  "source_name": "Mantine",
  "category": "component_libraries",
  "url": "https://mantine.dev/hooks/use-local-storage/",
  "title": "use-local-storage",
  "content": "use-local-storage\nExposes localStorage value as react state, syncs state across opened tabs\nSource\nView source code\nDocs\nEdit this page\nPackage\n@mantine/hooks\nUsage\nuse-local-storage\nallows using value from the\nlocalStorage\nas react state.\nThe hook works the same way as\nuseState\n, but also writes the value to the\nlocalStorage\n:\nimport { useLocalStorage } from '@mantine/hooks';\n\n// The hook will read value from localStorage.getItem('color-scheme')\n// If localStorage is not available or value at a given key does not exist\n// 'dark' will be assigned to value variable\nconst [value, setValue] = useLocalStorage({\n  key: 'color-scheme',\n  defaultValue: 'dark',\n});\n\n// Value is set both to state and localStorage at 'color-scheme'\nsetValue('light');\n\n// You can also use callback like in useState hook to set value\nsetValue((current) => (current === 'dark' ? 'light' : 'dark'));\nExpand code\nExample\nExample of a color scheme toggle button that uses\nuse-local-storage\nhook\nto store current color scheme in the\nlocalStorage\n:\nimport { IconMoonStars, IconSun } from '@tabler/icons-react';\nimport { ActionIcon } from '@mantine/core';\nimport { useLocalStorage } from '@mantine/hooks';\n\nfunction ColorSchemeToggle() {\n  const [colorScheme, setColorScheme] = useLocalStorage<\n    'light' | 'dark'\n  >({\n    key: 'color-scheme',\n    defaultValue: 'light',\n  });\n\n  const toggleColorScheme = () =>\n    setColorScheme((current) =>\n      current === 'dark' ? 'light' : 'dark'\n    );\n\n  return (\n    <ActionIcon onClick={toggleColorScheme}>\n      {colorScheme === 'dark' ? <IconSun /> : <IconMoonStars />}\n    </ActionIcon>\n  );\n}\nExpand code\nRemove value\nUse\nremoveValue\ncallback to clean\nlocalStorage\n/\nsessionStorage\n.\nWhen value is removed it is reset to\ndefaultValue\n:\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue, removeValue] = useLocalStorage({\n  key: 'color-scheme',\n  defaultValue: 'light',\n});\nExpand code\nBrowser tabs synchronization\nuse-local-storage\nsubscribes to\nstorage event\n.\nWhen state changes in one tab, it automatically updates the value in all other opened browser tabs.\nYou can test this feature by opening 2 tabs with Mantine docs side by side and changing the color scheme\n(button on the top right or\n\u2318 + J\non MacOS and\nCtrl + J\non Windows and Linux).\nSerialize/deserialize JSON\nBy default, the hook will serialize/deserialize data with\nJSON.stringify\n/\nJSON.parse\n.\nIf you need to store data in local storage that cannot be serialized with\nJSON.stringify\n\u2013 provide your own serialization handlers:\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useLocalStorage({\n  key: 'color-scheme',\n  serialize: (value) => {\n    /* return value serialized to string */\n  },\n  deserialize: (localStorageValue) => {\n    /* parse localStorage string value and return value */\n  },\n});\nExpand code\nUsage with superjson\nsuperjson\nis compatible with\nJSON.stringify\n/\nJSON.parse\nbut works for\nDate\n,\nMap\n,\nSet\nand\nBigInt\n:\nimport superjson from 'superjson';\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst defaultValue = { name: 'John', age: 25 };\n\nconst [value, setValue] = useLocalStorage({\n  key: 'data',\n  defaultValue,\n  serialize: superjson.stringify,\n  deserialize: (str) =>\n    str === undefined ? defaultValue : superjson.parse(str),\n});\nExpand code\nuse-session-storage\nuse-session-storage\nhook works the same way as\nuse-local-storage\nhook but uses\nsessionStorage\ninstead of\nwindow.localStorage\n:\nimport { useSessionStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useSessionStorage({\n  key: 'session-key',\n  defaultValue: 'mantine',\n});\nExpand code\nSet value type\nYou can specify value type same as in\nuseState\nhook:\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useLocalStorage<'dark' | 'light'>({\n  key: 'color-scheme',\n  defaultValue: 'light',\n});\nExpand code\nRead storage value\nTo read value from storage without using hook, use\nreadLocalStorageValue\n/\nreadSessionStorageValue\nfunctions.\nFunctions accept the same arguments as\nuse-local-storage\n/\nuse-session-storage\nhooks:\nimport { readLocalStorageValue } from '@mantine/hooks';\n\nconst value = readLocalStorageValue({ key: 'color-scheme' });\nExpand code\nDefinition\ninterface UseStorageOptions<T> {\n  /** Local storage key */\n  key: string;\n\n  /** Default value that will be set if value is not found in local storage */\n  defaultValue?: T;\n\n  /** If set to true, value will be updated in useEffect after mount. Default value is true. */\n  getInitialValueInEffect?: boolean;\n\n  /** Determines whether the value must be synced between browser tabs, `true` by default */\n  sync?: boolean;\n\n  /** Function to serialize value into a string to be saved in local storage */\n  serialize?: (value: T) => string;\n\n  /** Function to deserialize string value from local storage to value */\n  deserialize?: (value: string) => T;\n}\n\ntype UseStorageReturnValue<T> = [\n  T, // current value\n  (val: T | ((prevState: T) => T)) => void, // callback to set value in storage\n  () => void, // callback to remove value from storage\n];\n\nfunction useLocalStorage<T = string>(\n  options: UseStorageOptions<T>,\n): UseStorageReturnValue<T>;\nExpand code\nExported types\nUseStorageOptions\nand\nUseStorageReturnValue\ntypes are exported from\n@mantine/hooks\npackage,\nyou can import them in your application:\nimport type { UseStorageOptions, UseStorageReturnValue } from '@mantine/hooks';\nExpand code\nuse-list-state\nuse-map",
  "content_markdown": "# use-local-storage\n\nExposes localStorage value as react state, syncs state across opened tabs\n\nSource\n\n[View source code](https://github.com/mantinedev/mantine/blob/master/packages/@mantine/hooks/src/use-local-storage/use-local-storage.ts)\n\nDocs\n\n[Edit this page](https://github.com/mantinedev/mantine/blob/master/apps/mantine.dev/src/pages/hooks/use-local-storage.mdx)\n\nPackage\n\n[@mantine/hooks](https://www.npmjs.com/package/@mantine/hooks)\n\n## [Usage](#usage)\n\n`use-local-storage` allows using value from the `localStorage` as react state.\nThe hook works the same way as `useState`, but also writes the value to the `localStorage`:\n\n```\nimport { useLocalStorage } from '@mantine/hooks';\n\n// The hook will read value from localStorage.getItem('color-scheme')\n// If localStorage is not available or value at a given key does not exist\n// 'dark' will be assigned to value variable\nconst [value, setValue] = useLocalStorage({\n  key: 'color-scheme',\n  defaultValue: 'dark',\n});\n\n// Value is set both to state and localStorage at 'color-scheme'\nsetValue('light');\n\n// You can also use callback like in useState hook to set value\nsetValue((current) => (current === 'dark' ? 'light' : 'dark'));\n```\n\nExpand code\n\n## [Example](#example)\n\nExample of a color scheme toggle button that uses `use-local-storage` hook\nto store current color scheme in the `localStorage`:\n\n```\nimport { IconMoonStars, IconSun } from '@tabler/icons-react';\nimport { ActionIcon } from '@mantine/core';\nimport { useLocalStorage } from '@mantine/hooks';\n\nfunction ColorSchemeToggle() {\n  const [colorScheme, setColorScheme] = useLocalStorage<\n    'light' | 'dark'\n  >({\n    key: 'color-scheme',\n    defaultValue: 'light',\n  });\n\n  const toggleColorScheme = () =>\n    setColorScheme((current) =>\n      current === 'dark' ? 'light' : 'dark'\n    );\n\n  return (\n    <ActionIcon onClick={toggleColorScheme}>\n      {colorScheme === 'dark' ? <IconSun /> : <IconMoonStars />}\n    </ActionIcon>\n  );\n}\n```\n\nExpand code\n\n## [Remove value](#remove-value)\n\nUse `removeValue` callback to clean `localStorage`/`sessionStorage`.\nWhen value is removed it is reset to `defaultValue`:\n\n```\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue, removeValue] = useLocalStorage({\n  key: 'color-scheme',\n  defaultValue: 'light',\n});\n```\n\nExpand code\n\n## [Browser tabs synchronization](#browser-tabs-synchronization)\n\n`use-local-storage` subscribes to [storage event](https://developer.mozilla.org/en-US/docs/Web/API/Window/storage_event).\nWhen state changes in one tab, it automatically updates the value in all other opened browser tabs.\nYou can test this feature by opening 2 tabs with Mantine docs side by side and changing the color scheme\n(button on the top right or `\u2318 + J` on MacOS and `Ctrl + J` on Windows and Linux).\n\n## [Serialize/deserialize JSON](#serializedeserialize-json)\n\nBy default, the hook will serialize/deserialize data with `JSON.stringify`/`JSON.parse`.\nIf you need to store data in local storage that cannot be serialized with `JSON.stringify`\n\u2013 provide your own serialization handlers:\n\n```\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useLocalStorage({\n  key: 'color-scheme',\n  serialize: (value) => {\n    /* return value serialized to string */\n  },\n  deserialize: (localStorageValue) => {\n    /* parse localStorage string value and return value */\n  },\n});\n```\n\nExpand code\n\n## [Usage with superjson](#usage-with-superjson)\n\n[superjson](https://github.com/blitz-js/superjson) is compatible with `JSON.stringify`/`JSON.parse` but works for `Date`, `Map`, `Set` and `BigInt`:\n\n```\nimport superjson from 'superjson';\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst defaultValue = { name: 'John', age: 25 };\n\nconst [value, setValue] = useLocalStorage({\n  key: 'data',\n  defaultValue,\n  serialize: superjson.stringify,\n  deserialize: (str) =>\n    str === undefined ? defaultValue : superjson.parse(str),\n});\n```\n\nExpand code\n\n## [use-session-storage](#use-session-storage)\n\n`use-session-storage` hook works the same way as `use-local-storage` hook but uses `sessionStorage` instead of `window.localStorage`:\n\n```\nimport { useSessionStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useSessionStorage({\n  key: 'session-key',\n  defaultValue: 'mantine',\n});\n```\n\nExpand code\n\n## [Set value type](#set-value-type)\n\nYou can specify value type same as in `useState` hook:\n\n```\nimport { useLocalStorage } from '@mantine/hooks';\n\nconst [value, setValue] = useLocalStorage<'dark' | 'light'>({\n  key: 'color-scheme',\n  defaultValue: 'light',\n});\n```\n\nExpand code\n\n## [Read storage value](#read-storage-value)\n\nTo read value from storage without using hook, use `readLocalStorageValue`/`readSessionStorageValue` functions.\nFunctions accept the same arguments as `use-local-storage`/`use-session-storage` hooks:\n\n```\nimport { readLocalStorageValue } from '@mantine/hooks';\n\nconst value = readLocalStorageValue({ key: 'color-scheme' });\n```\n\nExpand code\n\n## [Definition](#definition)\n\n```\ninterface UseStorageOptions<T> {\n  /** Local storage key */\n  key: string;\n\n  /** Default value that will be set if value is not found in local storage */\n  defaultValue?: T;\n\n  /** If set to true, value will be updated in useEffect after mount. Default value is true. */\n  getInitialValueInEffect?: boolean;\n\n  /** Determines whether the value must be synced between browser tabs, `true` by default */\n  sync?: boolean;\n\n  /** Function to serialize value into a string to be saved in local storage */\n  serialize?: (value: T) => string;\n\n  /** Function to deserialize string value from local storage to value */\n  deserialize?: (value: string) => T;\n}\n\ntype UseStorageReturnValue<T> = [\n  T, // current value\n  (val: T | ((prevState: T) => T)) => void, // callback to set value in storage\n  () => void, // callback to remove value from storage\n];\n\nfunction useLocalStorage<T = string>(\n  options: UseStorageOptions<T>,\n): UseStorageReturnValue<T>;\n```\n\nExpand code\n\n## [Exported types](#exported-types)\n\n`UseStorageOptions` and `UseStorageReturnValue` types are exported from `@mantine/hooks` package,\nyou can import them in your application:\n\n```\nimport type { UseStorageOptions, UseStorageReturnValue } from '@mantine/hooks';\n```\n\nExpand code\n\n[use-list-state](/hooks/use-list-state/)[use-map](/hooks/use-map/)",
  "tags": [
    "mantine",
    "react",
    "hooks",
    "components"
  ],
  "extracted_at": "2026-02-03T12:40:23.802118+00:00",
  "content_length": 5459,
  "content_hash": "ed9aacef38e3a2b1"
}