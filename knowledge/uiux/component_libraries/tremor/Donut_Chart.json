{
  "id": "tremor__docs_visualizations_donut-chart",
  "source_id": "tremor",
  "source_name": "Tremor",
  "category": "component_libraries",
  "url": "https://tremor.so/docs/visualizations/donut-chart",
  "title": "Donut Chart",
  "content": "Visualization\nDonut Chart\nDisplays quantitative information through a circular visualization.\nGitHub\nPreview\nCode\nVariant: `donut`\nVariant: `pie`\n\"use client\"\nimport\n{\nDonutChart\n}\nfrom\n\"@/components/DonutChart\"\nconst\ndata\n=\n[\n{\nname\n:\n\"SolarCells\"\n,\namount\n:\n4890\n,\n}\n,\n{\nname\n:\n\"Glass\"\n,\namount\n:\n2103\n,\n}\n,\n{\nname\n:\n\"JunctionBox\"\n,\namount\n:\n2050\n,\n}\n,\n{\nname\n:\n\"Adhesive\"\n,\namount\n:\n1300\n,\n}\n,\n{\nname\n:\n\"BackSheet\"\n,\namount\n:\n1100\n,\n}\n,\n{\nname\n:\n\"Frame\"\n,\namount\n:\n700\n,\n}\n,\n{\nname\n:\n\"Encapsulant\"\n,\namount\n:\n200\n,\n}\n,\n]\nexport\nconst\nDonutChartHero\n=\n(\n)\n=>\n(\n<\ndiv\nclassName\n=\n\"\nflex flex-col gap-12\n\"\n>\n<\ndiv\nclassName\n=\n\"\nflex flex-col items-center justify-center gap-4\n\"\n>\n<\np\nclassName\n=\n\"\ntext-gray-700 dark:text-gray-300\n\"\n>\nVariant: `donut`\n</\np\n>\n<\nDonutChart\ndata\n=\n{\ndata\n}\ncategory\n=\n\"\nname\n\"\nvalue\n=\n\"\namount\n\"\nvalueFormatter\n=\n{\n(\nnumber\n:\nnumber\n)\n=>\n`\n$\n${\nIntl\n.\nNumberFormat\n(\n\"us\"\n)\n.\nformat\n(\nnumber\n)\n.\ntoString\n(\n)\n}\n`\n}\n/>\n</\ndiv\n>\n<\ndiv\nclassName\n=\n\"\nflex flex-col items-center justify-center gap-4\n\"\n>\n<\np\nclassName\n=\n\"\ntext-gray-700 dark:text-gray-300\n\"\n>\nVariant: `pie`\n</\np\n>\n<\nDonutChart\ndata\n=\n{\ndata\n}\nvariant\n=\n\"\npie\n\"\ncategory\n=\n\"\nname\n\"\nvalue\n=\n\"\namount\n\"\nvalueFormatter\n=\n{\n(\nnumber\n:\nnumber\n)\n=>\n`\n$\n${\nIntl\n.\nNumberFormat\n(\n\"us\"\n)\n.\nformat\n(\nnumber\n)\n.\ntoString\n(\n)\n}\n`\n}\n/>\n</\ndiv\n>\n</\ndiv\n>\n)\nInstallation\n1\nInstall dependencies:\nnpm i recharts\n2\nAdd component:\nCopy and paste the code into your project\u2019s component directory. Do not forget to update the import paths. If you have not added the required\nchartUtils.ts\n, check out the\nadd utilities and helpers\nsection in installation.\nShow more\n// Tremor DonutChart [v1.0.0]\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\"\nimport\nReact\nfrom\n\"react\"\nimport\n{\nPie\n,\nPieChart\nas\nReChartsDonutChart\n,\nResponsiveContainer\n,\nSector\n,\nTooltip\n,\n}\nfrom\n\"recharts\"\nimport\n{\nAvailableChartColors\n,\nconstructCategoryColors\n,\ngetColorClassName\n,\ntype\nAvailableChartColorsKeys\n,\n}\nfrom\n\"@/lib/chartUtils\"\nimport\n{\ncx\n}\nfrom\n\"@/lib/utils\"\nconst\nsumNumericArray\n=\n(\narr\n:\nnumber\n[\n]\n)\n:\nnumber\n=>\narr\n.\nreduce\n(\n(\nsum\n,\nnum\n)\n=>\nsum\n+\nnum\n,\n0\n)\nconst\nparseData\n=\n(\ndata\n:\nRecord\n<\nstring\n,\nany\n>\n[\n]\n,\ncategoryColors\n:\nMap\n<\nstring\n,\nAvailableChartColorsKeys\n>\n,\ncategory\n:\nstring\n,\n)\n=>\ndata\n.\nmap\n(\n(\ndataPoint\n)\n=>\n(\n{\n...\ndataPoint\n,\ncolor\n:\ncategoryColors\n.\nget\n(\ndataPoint\n[\ncategory\n]\n)\n||\nAvailableChartColors\n[\n0\n]\n,\nclassName\n:\ngetColorClassName\n(\ncategoryColors\n.\nget\n(\ndataPoint\n[\ncategory\n]\n)\n||\nAvailableChartColors\n[\n0\n]\n,\n\"fill\"\n,\n)\n,\n}\n)\n)\nconst\ncalculateDefaultLabel\n=\n(\ndata\n:\nany\n[\n]\n,\nvalueKey\n:\nstring\n)\n:\nnumber\n=>\nsumNumericArray\n(\ndata\n.\nmap\n(\n(\ndataPoint\n)\n=>\ndataPoint\n[\nvalueKey\n]\n)\n)\nconst\nparseLabelInput\n=\n(\nlabelInput\n:\nstring\n|\nundefined\n,\nvalueFormatter\n:\n(\nvalue\n:\nnumber\n)\n=>\nstring\n,\ndata\n:\nany\n[\n]\n,\nvalueKey\n:\nstring\n,\n)\n:\nstring\n=>\nlabelInput\n||\nvalueFormatter\n(\ncalculateDefaultLabel\n(\ndata\n,\nvalueKey\n)\n)\n//#region Tooltip\ntype\nTooltipProps\n=\nPick\n<\nChartTooltipProps\n,\n\"active\"\n|\n\"payload\"\n>\ntype\nPayloadItem\n=\n{\ncategory\n:\nstring\nvalue\n:\nnumber\ncolor\n:\nAvailableChartColorsKeys\n}\ninterface\nChartTooltipProps\n{\nactive\n:\nboolean\n|\nundefined\npayload\n:\nPayloadItem\n[\n]\nvalueFormatter\n:\n(\nvalue\n:\nnumber\n)\n=>\nstring\n}\nconst\nChartTooltip\n=\n(\n{\nactive\n,\npayload\n,\nvalueFormatter\n,\n}\n:\nChartTooltipProps\n)\n=>\n{\nif\n(\nactive\n&&\npayload\n&&\npayload\n.\nlength\n)\n{\nreturn\n(\n<\ndiv\nclassName\n=\n{\ncx\n(\n// base\n\"rounded-md border text-sm shadow-md\"\n,\n// border color\n\"border-gray-200 dark:border-gray-800\"\n,\n// background color\n\"bg-white dark:bg-gray-950\"\n,\n)\n}\n>\n<\ndiv\nclassName\n=\n{\ncx\n(\n\"space-y-1 px-4 py-2\"\n)\n}\n>\n{\npayload\n.\nmap\n(\n(\n{\nvalue\n,\ncategory\n,\ncolor\n}\n,\nindex\n)\n=>\n(\n<\ndiv\nkey\n=\n{\n`\nid-\n${\nindex\n}\n`\n}\nclassName\n=\n\"\nflex items-center justify-between space-x-8\n\"\n>\n<\ndiv\nclassName\n=\n\"\nflex items-center space-x-2\n\"\n>\n<\nspan\naria-hidden\n=\n\"\ntrue\n\"\nclassName\n=\n{\ncx\n(\n\"size-2 shrink-0 rounded-full\"\n,\ngetColorClassName\n(\ncolor\n,\n\"bg\"\n)\n,\n)\n}\n/>\n<\np\nclassName\n=\n{\ncx\n(\n// base\n\"text-right whitespace-nowrap\"\n,\n// text color\n\"text-gray-700 dark:text-gray-300\"\n,\n)\n}\n>\n{\ncategory\n}\n</\np\n>\n</\ndiv\n>\n<\np\nclassName\n=\n{\ncx\n(\n// base\n\"text-right font-medium whitespace-nowrap tabular-nums\"\n,\n// text color\n\"text-gray-900 dark:text-gray-50\"\n,\n)\n}\n>\n{\nvalueFormatter\n(\nvalue\n)\n}\n</\np\n>\n</\ndiv\n>\n)\n)\n}\n</\ndiv\n>\n</\ndiv\n>\n)\n}\nreturn\nnull\n}\nconst\nrenderInactiveShape\n=\n(\nprops\n:\nany\n)\n=>\n{\nconst\n{\ncx\n,\ncy\n,\ninnerRadius\n,\nouterRadius\n,\nstartAngle\n,\nendAngle\n,\nclassName\n}\n=\nprops\nreturn\n(\n<\nSector\ncx\n=\n{\ncx\n}\ncy\n=\n{\ncy\n}\ninnerRadius\n=\n{\ninnerRadius\n}\nouterRadius\n=\n{\nouterRadius\n}\nstartAngle\n=\n{\nstartAngle\n}\nendAngle\n=\n{\nendAngle\n}\nclassName\n=\n{\nclassName\n}\nfill\n=\n\"\n\"\nopacity\n=\n{\n0.3\n}\nstyle\n=\n{\n{\noutline\n:\n\"none\"\n}\n}\n/>\n)\n}\ntype\nDonutChartVariant\n=\n\"donut\"\n|\n\"pie\"\ntype\nBaseEventProps\n=\n{\neventType\n:\n\"sector\"\ncategoryClicked\n:\nstring\n[\nkey\n:\nstring\n]\n:\nnumber\n|\nstring\n}\ntype\nDonutChartEventProps\n=\nBaseEventProps\n|\nnull\n|\nundefined\ninterface\nDonutChartProps\nextends\nReact\n.\nHTMLAttributes\n<\nHTMLDivElement\n>\n{\ndata\n:\nRecord\n<\nstring\n,\nany\n>\n[\n]\ncategory\n:\nstring\nvalue\n:\nstring\ncolors\n?\n:\nAvailableChartColorsKeys\n[\n]\nvariant\n?\n:\nDonutChartVariant\nvalueFormatter\n?\n:\n(\nvalue\n:\nnumber\n)\n=>\nstring\nlabel\n?\n:\nstring\nshowLabel\n?\n:\nboolean\nshowTooltip\n?\n:\nboolean\nonValueChange\n?\n:\n(\nvalue\n:\nDonutChartEventProps\n)\n=>\nvoid\ntooltipCallback\n?\n:\n(\ntooltipCallbackContent\n:\nTooltipProps\n)\n=>\nvoid\ncustomTooltip\n?\n:\nReact\n.\nComponentType\n<\nTooltipProps\n>\n}\nconst\nDonutChart\n=\nReact\n.\nforwardRef\n<\nHTMLDivElement\n,\nDonutChartProps\n>\n(\n(\n{\ndata\n=\n[\n]\n,\nvalue\n,\ncategory\n,\ncolors\n=\nAvailableChartColors\n,\nvariant\n=\n\"donut\"\n,\nvalueFormatter\n=\n(\nvalue\n:\nnumber\n)\n=>\nvalue\n.\ntoString\n(\n)\n,\nlabel\n,\nshowLabel\n=\nfalse\n,\nshowTooltip\n=\ntrue\n,\nonValueChange\n,\ntooltipCallback\n,\ncustomTooltip\n,\nclassName\n,\n...\nother\n}\n,\nforwardedRef\n,\n)\n=>\n{\nconst\nCustomTooltip\n=\ncustomTooltip\nconst\n[\nactiveIndex\n,\nsetActiveIndex\n]\n=\nReact\n.\nuseState\n<\nnumber\n|\nundefined\n>\n(\nundefined\n,\n)\nconst\nisDonut\n=\nvariant\n===\n\"donut\"\nconst\nparsedLabelInput\n=\nparseLabelInput\n(\nlabel\n,\nvalueFormatter\n,\ndata\n,\nvalue\n)\nconst\ncategories\n=\nArray\n.\nfrom\n(\nnew\nSet\n(\ndata\n.\nmap\n(\n(\nitem\n)\n=>\nitem\n[\ncategory\n]\n)\n)\n)\nconst\ncategoryColors\n=\nconstructCategoryColors\n(\ncategories\n,\ncolors\n)\nconst\nprevActiveRef\n=\nReact\n.\nuseRef\n<\nboolean\n|\nundefined\n>\n(\nundefined\n)\nconst\nprevCategoryRef\n=\nReact\n.\nuseRef\n<\nstring\n|\nundefined\n>\n(\nundefined\n)\nconst\nhandleShapeClick\n=\n(\ndata\n:\nany\n,\nindex\n:\nnumber\n,\nevent\n:\nReact\n.\nMouseEvent\n,\n)\n=>\n{\nevent\n.\nstopPropagation\n(\n)\nif\n(\n!\nonValueChange\n)\nreturn\nif\n(\nactiveIndex\n===\nindex\n)\n{\nsetActiveIndex\n(\nundefined\n)\nonValueChange\n(\nnull\n)\n}\nelse\n{\nsetActiveIndex\n(\nindex\n)\nonValueChange\n(\n{\neventType\n:\n\"sector\"\n,\ncategoryClicked\n:\ndata\n.\npayload\n[\ncategory\n]\n,\n...\ndata\n.\npayload\n,\n}\n)\n}\n}\nreturn\n(\n<\ndiv\nref\n=\n{\nforwardedRef\n}\nclassName\n=\n{\ncx\n(\n\"h-40 w-40\"\n,\nclassName\n)\n}\ntremor-id\n=\n\"\ntremor-raw\n\"\n{\n...\nother\n}\n>\n<\nResponsiveContainer\nclassName\n=\n\"\nsize-full\n\"\n>\n<\nReChartsDonutChart\nonClick\n=\n{\nonValueChange\n&&\nactiveIndex\n!==\nundefined\n?\n(\n)\n=>\n{\nsetActiveIndex\n(\nundefined\n)\nonValueChange\n(\nnull\n)\n}\n:\nundefined\n}\nmargin\n=\n{\n{\ntop\n:\n0\n,\nleft\n:\n0\n,\nright\n:\n0\n,\nbottom\n:\n0\n}\n}\n>\n{\nshowLabel\n&&\nisDonut\n&&\n(\n<\ntext\nclassName\n=\n\"\nfill-gray-700 dark:fill-gray-300\n\"\nx\n=\n\"\n50%\n\"\ny\n=\n\"\n50%\n\"\ntextAnchor\n=\n\"\nmiddle\n\"\ndominantBaseline\n=\n\"\nmiddle\n\"\n>\n{\nparsedLabelInput\n}\n</\ntext\n>\n)\n}\n<\nPie\nclassName\n=\n{\ncx\n(\n\"stroke-white dark:stroke-gray-950 [&_.recharts-pie-sector]:outline-hidden\"\n,\nonValueChange\n?\n\"cursor-pointer\"\n:\n\"cursor-default\"\n,\n)\n}\ndata\n=\n{\nparseData\n(\ndata\n,\ncategoryColors\n,\ncategory\n)\n}\ncx\n=\n\"\n50%\n\"\ncy\n=\n\"\n50%\n\"\nstartAngle\n=\n{\n90\n}\nendAngle\n=\n{\n-\n270\n}\ninnerRadius\n=\n{\nisDonut\n?\n\"75%\"\n:\n\"0%\"\n}\nouterRadius\n=\n\"\n100%\n\"\nstroke\n=\n\"\n\"\nstrokeLinejoin\n=\n\"\nround\n\"\ndataKey\n=\n{\nvalue\n}\nnameKey\n=\n{\ncategory\n}\nisAnimationActive\n=\n{\nfalse\n}\nonClick\n=\n{\nhandleShapeClick\n}\nactiveIndex\n=\n{\nactiveIndex\n}\ninactiveShape\n=\n{\nrenderInactiveShape\n}\nstyle\n=\n{\n{\noutline\n:\n\"none\"\n}\n}\n/>\n{\nshowTooltip\n&&\n(\n<\nTooltip\nwrapperStyle\n=\n{\n{\noutline\n:\n\"none\"\n}\n}\nisAnimationActive\n=\n{\nfalse\n}\ncontent\n=\n{\n(\n{\nactive\n,\npayload\n}\n)\n=>\n{\nconst\ncleanPayload\n=\npayload\n?\npayload\n.\nmap\n(\n(\nitem\n:\nany\n)\n=>\n(\n{\ncategory\n:\nitem\n.\npayload\n[\ncategory\n]\n,\nvalue\n:\nitem\n.\nvalue\n,\ncolor\n:\ncategoryColors\n.\nget\n(\nitem\n.\npayload\n[\ncategory\n]\n,\n)\nas\nAvailableChartColorsKeys\n,\n}\n)\n)\n:\n[\n]\nconst\npayloadCategory\n:\nstring\n=\ncleanPayload\n[\n0\n]\n?.\ncategory\nif\n(\ntooltipCallback\n&&\n(\nactive\n!==\nprevActiveRef\n.\ncurrent\n||\npayloadCategory\n!==\nprevCategoryRef\n.\ncurrent\n)\n)\n{\ntooltipCallback\n(\n{\nactive\n,\npayload\n:\ncleanPayload\n,\n}\n)\nprevActiveRef\n.\ncurrent\n=\nactive\nprevCategoryRef\n.\ncurrent\n=\npayloadCategory\n}\nreturn\nshowTooltip\n&&\nactive\n?\n(\nCustomTooltip\n?\n(\n<\nCustomTooltip\nactive\n=\n{\nactive\n}\npayload\n=\n{\ncleanPayload\n}\n/>\n)\n:\n(\n<\nChartTooltip\nactive\n=\n{\nactive\n}\npayload\n=\n{\ncleanPayload\n}\nvalueFormatter\n=\n{\nvalueFormatter\n}\n/>\n)\n)\n:\nnull\n}\n}\n/\n>\n)\n}\n</\nReChartsDonutChart\n>\n</\nResponsiveContainer\n>\n</\ndiv\n>\n)\n}\n,\n)\nDonutChart\n.\ndisplayName\n=\n\"DonutChart\"\nexport\n{\nDonutChart\n,\ntype\nDonutChartEventProps\n,\ntype\nTooltipProps\n}\nExample with label\nPreview\nCode\n\"use client\"\nimport\n{\nDonutChart\n}\nfrom\n\"@/components/DonutChart\"\nconst\nchartdata\n=\n[\n{\nname\n:\n\"SolarCells\"\n,\namount\n:\n4890\n,\n}\n,\n{\nname\n:\n\"Glass\"\n,\namount\n:\n2103\n,\n}\n,\n{\nname\n:\n\"JunctionBox\"\n,\namount\n:\n2050\n,\n}\n,\n{\nname\n:\n\"Adhesive\"\n,\namount\n:\n1300\n,\n}\n,\n{\nname\n:\n\"BackSheet\"\n,\namount\n:\n1100\n,\n}\n,\n{\nname\n:\n\"Frame\"\n,\namount\n:\n700\n,\n}\n,\n{\nname\n:\n\"Encapsulant\"\n,\namount\n:\n200\n,\n}\n,\n]\nexport\nconst\nDonutChartLabelExample\n=\n(\n)\n=>\n(\n<\nDonutChart\nclassName\n=\n\"\nmx-auto\n\"\ndata\n=\n{\nchartdata\n}\ncategory\n=\n\"\nname\n\"\nvalue\n=\n\"\namount\n\"\nshowLabel\n=\n{\ntrue\n}\nvalueFormatter\n=\n{\n(\nnumber\n:\nnumber\n)\n=>\n`\n$\n${\nIntl\n.\nNumberFormat\n(\n\"us\"\n)\n.\nformat\n(\nnumber\n)\n.\ntoString\n(\n)\n}\n`\n}\n/>\n)\nExample with onValueChange\nWhen you add\nonValueChange\nto the DonutChart, it becomes clickable.\nPreview\nCode\nnull\n\"use client\"\nimport\nReact\nfrom\n\"react\"\nimport\n{\nDonutChart\n,\nDonutChartEventProps\n}\nfrom\n\"@/components/DonutChart\"\nconst\nchartdata\n=\n[\n{\nname\n:\n\"SolarCells\"\n,\namount\n:\n4890\n,\n}\n,\n{\nname\n:\n\"Glass\"\n,\namount\n:\n2103\n,\n}\n,\n{\nname\n:\n\"JunctionBox\"\n,\namount\n:\n2050\n,\n}\n,\n{\nname\n:\n\"Adhesive\"\n,\namount\n:\n1300\n,\n}\n,\n{\nname\n:\n\"BackSheet\"\n,\namount\n:\n1100\n,\n}\n,\n{\nname\n:\n\"Frame\"\n,\namount\n:\n700\n,\n}\n,\n{\nname\n:\n\"Encapsulant\"\n,\namount\n:\n200\n,\n}\n,\n]\nexport\nconst\nDonutChartOnValueChangeExample\n=\n(\n)\n=>\n{\nconst\n[\nvalue\n,\nsetValue\n]\n=\nReact\n.\nuseState\n<\nDonutChartEventProps\n>\n(\nnull\n)\nreturn\n(\n<\n>\n<\nDonutChart\nclassName\n=\n\"\nmx-auto\n\"\ndata\n=\n{\nchartdata\n}\ncategory\n=\n\"\nname\n\"\nvalue\n=\n\"\namount\n\"\nonValueChange\n=\n{\n(\nv\n)\n=>\nsetValue\n(\nv\n)\n}\n/>\n<\npre\nclassName\n=\n\"\nmt-8 rounded-md bg-gray-950 p-3 text-sm text-white dark:bg-gray-800\n\"\n>\n{\nJSON\n.\nstringify\n(\nvalue\n,\nnull\n,\n2\n)\n}\n</\npre\n>\n</\n>\n)\n}\nExample with tooltipCallback and colors\nPreview\nCode\nRevenue by category\n$10,343\n\"use client\"\nimport\nReact\nfrom\n\"react\"\nimport\n{\nDonutChart\n,\nTooltipProps\n}\nfrom\n\"@/components/DonutChart\"\ninterface\nDataItem\n{\nname\n:\nstring\namount\n:\nnumber\n}\nconst\ndata\n:\nDataItem\n[\n]\n=\n[\n{\nname\n:\n\"SolarCells\"\n,\namount\n:\n4890\n,\n}\n,\n{\nname\n:\n\"Glass\"\n,\namount\n:\n2103\n,\n}\n,\n{\nname\n:\n\"JunctionBox\"\n,\namount\n:\n2050\n,\n}\n,\n{\nname\n:\n\"Adhesive\"\n,\namount\n:\n1300\n,\n}\n,\n]\nfunction\nDonutChartCallbackExample\n(\n)\n{\nconst\n[\ndatas\n,\nsetDatas\n]\n=\nReact\n.\nuseState\n<\nTooltipProps\n|\nnull\n>\n(\nnull\n)\nconst\nsumNumericArray\n=\n(\narr\n:\nnumber\n[\n]\n)\n:\nnumber\n=>\narr\n.\nreduce\n(\n(\nsum\n,\nnum\n)\n=>\nsum\n+\nnum\n,\n0\n)\nconst\ncurrencyFormatter\n=\n(\nnumber\n:\nnumber\n)\n=>\n`\n$\n${\nIntl\n.\nNumberFormat\n(\n\"us\"\n)\n.\nformat\n(\nnumber\n)\n}\n`\nconst\npayload\n=\ndatas\n?.\npayload\n?.\n[\n0\n]\nconst\nvalue\n=\npayload\n?.\nvalue\n??\n0\nconst\nformattedValue\n=\npayload\n?\ncurrencyFormatter\n(\nvalue\n)\n:\ncurrencyFormatter\n(\nsumNumericArray\n(\ndata\n.\nmap\n(\n(\ndataPoint\n)\n=>\ndataPoint\n.\namount\n)\n)\n,\n)\nreturn\n(\n<\ndiv\n>\n<\np\nclassName\n=\n\"\ntext-center text-sm text-gray-700 dark:text-gray-300\n\"\n>\nRevenue by category\n</\np\n>\n<\np\nclassName\n=\n\"\nmt-2 w-full text-center text-xl font-semibold text-gray-900 dark:text-gray-50\n\"\n>\n{\nformattedValue\n}\n</\np\n>\n<DonutChart\ndata=\n{\ndata\n}\ncategory=\"name\"\nvalue=\"amount\"\nclassName=\"mx-auto mt-8\"\ncolors=\n{\n[\n\"blue\"\n,\n\"violet\"\n,\n\"cyan\"\n,\n\"emerald\"\n]\n}\ntooltipCallback=\n{\n(\nprops\n)\n=>\n{\nif\n(\nprops\n.\nactive\n)\n{\nsetDatas\n(\n(\nprev\n)\n=>\n{\nif\n(\nprev\n?.\npayload\n[\n0\n]\n.\ncategory\n===\nprops\n.\npayload\n[\n0\n]\n.\ncategory\n)\nreturn\nprev\nreturn\nprops\n}\n)\n}\nelse\n{\nsetDatas\n(\nnull\n)\n}\nreturn\nnull\n}\n}\n/>\n</\ndiv\n>\n)\n}\nAPI Reference: DonutChart\ndata\nRequired\nRecord<string, any>[]\nData used to display the chart.\ncateogry\nRequired\nstring\nKey of the data object to map the data to the categories.\nvalue\nRequired\nstring\nSelect the value from your data.\ncolors\nAvailableChartColorsKeys[]\nChange the colors of the categories. To add, update, or remove the colors, edit the 'chartColors' array in your chartUtils.ts file. The AvailableChartColorsKeys will be automatically updated.\nDefault:\nAvailableChartColors, which are by default: 'blue' | 'emerald' | 'violet' | 'amber' | 'gray' | 'cyan' | 'pink' | 'lime' | 'fuchsia'\nvariant\n'donut' | 'pie'\nSelect how chart is rendered.\nDefault:\n'donut'\nvalueFormatter\n(value: number) => string\nControls the text formatting for the y-axis values. Also used in the Tooltip.\nlabel\nstring\nPlaces a text element in the center of the donut chart. Only available when variant property is set to 'donut'.\nshowLabel\nboolean\nControls the visibility of the label displayed in the center. Only available when variant property is set to 'donut'.\nDefault:\nfalse\nshowTooltip\nboolean\nControls the visibility of the tooltip.\nDefault:\ntrue\nonValueChange\n(value: DonutChartEventProps) => void\nCallback function for when the value of the component changes.\ntooltipCallback\n(tooltipCallbackContent: TooltipProps) => void\nCallback function that returns the active, payload, when the tooltip changes.\ncustomTooltip\nReact.ComponentType<TooltipProps>\nRender a custom tooltip component.",
  "content_markdown": "Visualization\n\n# Donut Chart\n\nDisplays quantitative information through a circular visualization.\n\n[GitHub](https://github.com/tremorlabs/tremor/tree/main/src/components/DonutChart)\n\nPreview\n\nCode\n\nVariant: `donut`\n\nVariant: `pie`\n\n```\n\"use client\"\nimport { DonutChart } from \"@/components/DonutChart\"\nconst data = [  {    name: \"SolarCells\",    amount: 4890,  },  {    name: \"Glass\",    amount: 2103,  },  {    name: \"JunctionBox\",    amount: 2050,  },  {    name: \"Adhesive\",    amount: 1300,  },  {    name: \"BackSheet\",    amount: 1100,  },  {    name: \"Frame\",    amount: 700,  },  {    name: \"Encapsulant\",    amount: 200,  },]\nexport const DonutChartHero = () => (  <div className=\"flex flex-col gap-12\">    <div className=\"flex flex-col items-center justify-center gap-4\">      <p className=\"text-gray-700 dark:text-gray-300\">Variant: `donut`</p>      <DonutChart        data={data}        category=\"name\"        value=\"amount\"        valueFormatter={(number: number) =>          `$${Intl.NumberFormat(\"us\").format(number).toString()}`        }      />    </div>    <div className=\"flex flex-col items-center justify-center gap-4\">      <p className=\"text-gray-700 dark:text-gray-300\">Variant: `pie`</p>      <DonutChart        data={data}        variant=\"pie\"        category=\"name\"        value=\"amount\"        valueFormatter={(number: number) =>          `$${Intl.NumberFormat(\"us\").format(number).toString()}`        }      />    </div>  </div>)\n```\n\n## Installation\n\n1. 1\n\n   ### Install dependencies:\n\n   ```\n   npm i recharts\n   ```\n2. 2\n\n   ### Add component:\n\n   Copy and paste the code into your project\u2019s component directory. Do not forget to update the import paths. If you have not added the required chartUtils.ts, check out the [add utilities and helpers](/docs/utilities/chartUtils) section in installation.\n\n   Show more\n\n   ```\n   // Tremor DonutChart [v1.0.0]/* eslint-disable @typescript-eslint/no-explicit-any */\n   \"use client\"\n   import React from \"react\"import {  Pie,  PieChart as ReChartsDonutChart,  ResponsiveContainer,  Sector,  Tooltip,} from \"recharts\"\n   import {  AvailableChartColors,  constructCategoryColors,  getColorClassName,  type AvailableChartColorsKeys,} from \"@/lib/chartUtils\"import { cx } from \"@/lib/utils\"\n   const sumNumericArray = (arr: number[]): number =>  arr.reduce((sum, num) => sum + num, 0)\n   const parseData = (  data: Record<string, any>[],  categoryColors: Map<string, AvailableChartColorsKeys>,  category: string,) =>  data.map((dataPoint) => ({    ...dataPoint,    color: categoryColors.get(dataPoint[category]) || AvailableChartColors[0],    className: getColorClassName(      categoryColors.get(dataPoint[category]) || AvailableChartColors[0],      \"fill\",    ),  }))\n   const calculateDefaultLabel = (data: any[], valueKey: string): number =>  sumNumericArray(data.map((dataPoint) => dataPoint[valueKey]))\n   const parseLabelInput = (  labelInput: string | undefined,  valueFormatter: (value: number) => string,  data: any[],  valueKey: string,): string => labelInput || valueFormatter(calculateDefaultLabel(data, valueKey))\n   //#region Tooltip\n   type TooltipProps = Pick<ChartTooltipProps, \"active\" | \"payload\">\n   type PayloadItem = {  category: string  value: number  color: AvailableChartColorsKeys}\n   interface ChartTooltipProps {  active: boolean | undefined  payload: PayloadItem[]  valueFormatter: (value: number) => string}\n   const ChartTooltip = ({  active,  payload,  valueFormatter,}: ChartTooltipProps) => {  if (active && payload && payload.length) {    return (      <div        className={cx(          // base          \"rounded-md border text-sm shadow-md\",          // border color          \"border-gray-200 dark:border-gray-800\",          // background color          \"bg-white dark:bg-gray-950\",        )}      >        <div className={cx(\"space-y-1 px-4 py-2\")}>          {payload.map(({ value, category, color }, index) => (            <div              key={`id-${index}`}              className=\"flex items-center justify-between space-x-8\"            >              <div className=\"flex items-center space-x-2\">                <span                  aria-hidden=\"true\"                  className={cx(                    \"size-2 shrink-0 rounded-full\",                    getColorClassName(color, \"bg\"),                  )}                />                <p                  className={cx(                    // base                    \"text-right whitespace-nowrap\",                    // text color                    \"text-gray-700 dark:text-gray-300\",                  )}                >                  {category}                </p>              </div>              <p                className={cx(                  // base                  \"text-right font-medium whitespace-nowrap tabular-nums\",                  // text color                  \"text-gray-900 dark:text-gray-50\",                )}              >                {valueFormatter(value)}              </p>            </div>          ))}        </div>      </div>    )  }  return null}\n   const renderInactiveShape = (props: any) => {  const { cx, cy, innerRadius, outerRadius, startAngle, endAngle, className } =    props\n     return (    <Sector      cx={cx}      cy={cy}      innerRadius={innerRadius}      outerRadius={outerRadius}      startAngle={startAngle}      endAngle={endAngle}      className={className}      fill=\"\"      opacity={0.3}      style={{ outline: \"none\" }}    />  )}\n   type DonutChartVariant = \"donut\" | \"pie\"\n   type BaseEventProps = {  eventType: \"sector\"  categoryClicked: string  [key: string]: number | string}\n   type DonutChartEventProps = BaseEventProps | null | undefined\n   interface DonutChartProps extends React.HTMLAttributes<HTMLDivElement> {  data: Record<string, any>[]  category: string  value: string  colors?: AvailableChartColorsKeys[]  variant?: DonutChartVariant  valueFormatter?: (value: number) => string  label?: string  showLabel?: boolean  showTooltip?: boolean  onValueChange?: (value: DonutChartEventProps) => void  tooltipCallback?: (tooltipCallbackContent: TooltipProps) => void  customTooltip?: React.ComponentType<TooltipProps>}\n   const DonutChart = React.forwardRef<HTMLDivElement, DonutChartProps>(  (    {      data = [],      value,      category,      colors = AvailableChartColors,      variant = \"donut\",      valueFormatter = (value: number) => value.toString(),      label,      showLabel = false,      showTooltip = true,      onValueChange,      tooltipCallback,      customTooltip,      className,      ...other    },    forwardedRef,  ) => {    const CustomTooltip = customTooltip    const [activeIndex, setActiveIndex] = React.useState<number | undefined>(      undefined,    )    const isDonut = variant === \"donut\"    const parsedLabelInput = parseLabelInput(label, valueFormatter, data, value)\n       const categories = Array.from(new Set(data.map((item) => item[category])))    const categoryColors = constructCategoryColors(categories, colors)\n       const prevActiveRef = React.useRef<boolean | undefined>(undefined)    const prevCategoryRef = React.useRef<string | undefined>(undefined)\n       const handleShapeClick = (      data: any,      index: number,      event: React.MouseEvent,    ) => {      event.stopPropagation()      if (!onValueChange) return\n         if (activeIndex === index) {        setActiveIndex(undefined)        onValueChange(null)      } else {        setActiveIndex(index)        onValueChange({          eventType: \"sector\",          categoryClicked: data.payload[category],          ...data.payload,        })      }    }\n       return (      <div        ref={forwardedRef}        className={cx(\"h-40 w-40\", className)}        tremor-id=\"tremor-raw\"        {...other}      >        <ResponsiveContainer className=\"size-full\">          <ReChartsDonutChart            onClick={              onValueChange && activeIndex !== undefined                ? () => {                    setActiveIndex(undefined)                    onValueChange(null)                  }                : undefined            }            margin={{ top: 0, left: 0, right: 0, bottom: 0 }}          >            {showLabel && isDonut && (              <text                className=\"fill-gray-700 dark:fill-gray-300\"                x=\"50%\"                y=\"50%\"                textAnchor=\"middle\"                dominantBaseline=\"middle\"              >                {parsedLabelInput}              </text>            )}            <Pie              className={cx(                \"stroke-white dark:stroke-gray-950 [&_.recharts-pie-sector]:outline-hidden\",                onValueChange ? \"cursor-pointer\" : \"cursor-default\",              )}              data={parseData(data, categoryColors, category)}              cx=\"50%\"              cy=\"50%\"              startAngle={90}              endAngle={-270}              innerRadius={isDonut ? \"75%\" : \"0%\"}              outerRadius=\"100%\"              stroke=\"\"              strokeLinejoin=\"round\"              dataKey={value}              nameKey={category}              isAnimationActive={false}              onClick={handleShapeClick}              activeIndex={activeIndex}              inactiveShape={renderInactiveShape}              style={{ outline: \"none\" }}            />            {showTooltip && (              <Tooltip                wrapperStyle={{ outline: \"none\" }}                isAnimationActive={false}                content={({ active, payload }) => {                  const cleanPayload = payload                    ? payload.map((item: any) => ({                        category: item.payload[category],                        value: item.value,                        color: categoryColors.get(                          item.payload[category],                        ) as AvailableChartColorsKeys,                      }))                    : []\n                     const payloadCategory: string = cleanPayload[0]?.category\n                     if (                    tooltipCallback &&                    (active !== prevActiveRef.current ||                      payloadCategory !== prevCategoryRef.current)                  ) {                    tooltipCallback({                      active,                      payload: cleanPayload,                    })                    prevActiveRef.current = active                    prevCategoryRef.current = payloadCategory                  }\n                     return showTooltip && active ? (                    CustomTooltip ? (                      <CustomTooltip active={active} payload={cleanPayload} />                    ) : (                      <ChartTooltip                        active={active}                        payload={cleanPayload}                        valueFormatter={valueFormatter}                      />                    )                  ) : null                }}              />            )}          </ReChartsDonutChart>        </ResponsiveContainer>      </div>    )  },)\n   DonutChart.displayName = \"DonutChart\"\n   export { DonutChart, type DonutChartEventProps, type TooltipProps }\n   ```\n\n## Example with label\n\nPreview\n\nCode\n\n```\n\"use client\"\nimport { DonutChart } from \"@/components/DonutChart\"\nconst chartdata = [  {    name: \"SolarCells\",    amount: 4890,  },  {    name: \"Glass\",    amount: 2103,  },  {    name: \"JunctionBox\",    amount: 2050,  },  {    name: \"Adhesive\",    amount: 1300,  },  {    name: \"BackSheet\",    amount: 1100,  },  {    name: \"Frame\",    amount: 700,  },  {    name: \"Encapsulant\",    amount: 200,  },]\nexport const DonutChartLabelExample = () => (  <DonutChart    className=\"mx-auto\"    data={chartdata}    category=\"name\"    value=\"amount\"    showLabel={true}    valueFormatter={(number: number) =>      `$${Intl.NumberFormat(\"us\").format(number).toString()}`    }  />)\n```\n\n## Example with onValueChange\n\nWhen you add onValueChange to the DonutChart, it becomes clickable.\n\nPreview\n\nCode\n\n```\nnull\n```\n\n```\n\"use client\"\nimport React from \"react\"\nimport { DonutChart, DonutChartEventProps } from \"@/components/DonutChart\"\nconst chartdata = [  {    name: \"SolarCells\",    amount: 4890,  },  {    name: \"Glass\",    amount: 2103,  },  {    name: \"JunctionBox\",    amount: 2050,  },  {    name: \"Adhesive\",    amount: 1300,  },  {    name: \"BackSheet\",    amount: 1100,  },  {    name: \"Frame\",    amount: 700,  },  {    name: \"Encapsulant\",    amount: 200,  },]\nexport const DonutChartOnValueChangeExample = () => {  const [value, setValue] = React.useState<DonutChartEventProps>(null)  return (    <>      <DonutChart        className=\"mx-auto\"         data={chartdata}        category=\"name\"        value=\"amount\"        onValueChange={(v) => setValue(v)}      />      <pre className=\"mt-8 rounded-md bg-gray-950 p-3 text-sm text-white dark:bg-gray-800\">        {JSON.stringify(value, null, 2)}      </pre>    </>  )}\n```\n\n## Example with tooltipCallback and colors\n\nPreview\n\nCode\n\nRevenue by category\n\n$10,343\n\n```\n\"use client\"\nimport React from \"react\"\nimport { DonutChart, TooltipProps } from \"@/components/DonutChart\"\ninterface DataItem {  name: string  amount: number}\nconst data: DataItem[] = [  {    name: \"SolarCells\",    amount: 4890,  },  {    name: \"Glass\",    amount: 2103,  },  {    name: \"JunctionBox\",    amount: 2050,  },  {    name: \"Adhesive\",    amount: 1300,  },]\nfunction DonutChartCallbackExample() {  const [datas, setDatas] = React.useState<TooltipProps | null>(null)\n  const sumNumericArray = (arr: number[]): number =>    arr.reduce((sum, num) => sum + num, 0)\n  const currencyFormatter = (number: number) =>    `$${Intl.NumberFormat(\"us\").format(number)}`\n  const payload = datas?.payload?.[0]  const value = payload?.value ?? 0\n  const formattedValue = payload    ? currencyFormatter(value)    : currencyFormatter(        sumNumericArray(data.map((dataPoint) => dataPoint.amount)),      )\n  return (    <div>      <p className=\"text-center text-sm text-gray-700 dark:text-gray-300\">        Revenue by category      </p>      <p className=\"mt-2 w-full text-center text-xl font-semibold text-gray-900 dark:text-gray-50\">        {formattedValue}      </p>      <DonutChart        data={data}        category=\"name\"        value=\"amount\"        className=\"mx-auto mt-8\"        colors={[\"blue\", \"violet\", \"cyan\", \"emerald\"]}        tooltipCallback={(props) => {          if (props.active) {            setDatas((prev) => {              if (prev?.payload[0].category === props.payload[0].category)                return prev              return props            })          } else {            setDatas(null)          }          return null        }}      />    </div>  )}\n```\n\n## API Reference: DonutChart\n\ndata\n\nRequired\n\nRecord<string, any>[]\n\n:   Data used to display the chart.\n\ncateogry\n\nRequired\n\nstring\n\n:   Key of the data object to map the data to the categories.\n\nvalue\n\nRequired\n\nstring\n\n:   Select the value from your data.\n\ncolors\n\nAvailableChartColorsKeys[]\n\n:   Change the colors of the categories. To add, update, or remove the colors, edit the 'chartColors' array in your chartUtils.ts file. The AvailableChartColorsKeys will be automatically updated.\n\nDefault: AvailableChartColors, which are by default: 'blue' | 'emerald' | 'violet' | 'amber' | 'gray' | 'cyan' | 'pink' | 'lime' | 'fuchsia'\n\nvariant\n\n'donut' | 'pie'\n\n:   Select how chart is rendered.\n\nDefault: 'donut'\n\nvalueFormatter\n\n(value: number) => string\n\n:   Controls the text formatting for the y-axis values. Also used in the Tooltip.\n\nlabel\n\nstring\n\n:   Places a text element in the center of the donut chart. Only available when variant property is set to 'donut'.\n\nshowLabel\n\nboolean\n\n:   Controls the visibility of the label displayed in the center. Only available when variant property is set to 'donut'.\n\nDefault: false\n\nshowTooltip\n\nboolean\n\n:   Controls the visibility of the tooltip.\n\nDefault: true\n\nonValueChange\n\n(value: DonutChartEventProps) => void\n\n:   Callback function for when the value of the component changes.\n\ntooltipCallback\n\n(tooltipCallbackContent: TooltipProps) => void\n\n:   Callback function that returns the active, payload, when the tooltip changes.\n\ncustomTooltip\n\nReact.ComponentType<TooltipProps>\n\n:   Render a custom tooltip component.",
  "tags": [
    "tremor",
    "dashboards",
    "charts",
    "react"
  ],
  "extracted_at": "2026-02-03T12:41:23.148688+00:00",
  "content_length": 13931,
  "content_hash": "6910af4ba4c63590"
}