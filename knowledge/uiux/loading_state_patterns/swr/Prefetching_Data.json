{
  "id": "swr__docs_prefetching",
  "source_id": "swr",
  "source_name": "SWR",
  "category": "loading_state_patterns",
  "url": "https://swr.vercel.app/docs/prefetching",
  "title": "Prefetching Data",
  "content": "Prefetching Data\nTop-Level Page Data\nThere\u2019re many ways to prefetch the data for SWR. For top level requests,\nrel=\"preload\"\nis highly recommended:\n<\nlink\nrel\n=\n\"preload\"\nhref\n=\n\"/api/data\"\nas\n=\n\"fetch\"\ncrossorigin\n=\n\"anonymous\"\n>\nJust put it inside your HTML\n<head>\n. It\u2019s easy, fast and native.\nIt will prefetch the data when the HTML loads, even before JavaScript starts to download. All your incoming fetch requests with the same URL will reuse the result (including SWR, of course).\nProgrammatically Prefetch\nSWR provides the\npreload\nAPI to prefetch the resources programmatically and store the results in the cache.\npreload\naccepts\nkey\nand\nfetcher\nas the arguments.\nYou can call\npreload\neven outside of React.\nimport\n{ useState }\nfrom\n'react'\nimport\nuseSWR, { preload }\nfrom\n'swr'\nconst\nfetcher\n=\n(\nurl\n)\n=>\nfetch\n(url).\nthen\n((\nres\n)\n=>\nres.\njson\n())\n// Preload the resource before rendering the User component below,\n// this prevents potential waterfalls in your application.\n// You can also start preloading when hovering the button or link, too.\npreload\n(\n'/api/user'\n, fetcher)\nfunction\nUser\n() {\nconst\n{\ndata\n}\n=\nuseSWR\n(\n'/api/user'\n, fetcher)\n...\n}\nexport\ndefault\nfunction\nApp\n() {\nconst\n[\nshow\n,\nsetShow\n]\n=\nuseState\n(\nfalse\n)\nreturn\n(\n<\ndiv\n>\n<\nbutton\nonClick\n=\n{()\n=>\nsetShow\n(\ntrue\n)}>Show User</\nbutton\n>\n{show\n?\n<\nUser\n/>\n:\nnull\n}\n</\ndiv\n>\n)\n}\nWithin React rendering tree,\npreload\nis also available to use in event handlers or effects.\nfunction\nApp\n({\nuserId\n}) {\nconst\n[\nshow\n,\nsetShow\n]\n=\nuseState\n(\nfalse\n)\n// preload in effects\nuseEffect\n(()\n=>\n{\npreload\n(\n'/api/user?id='\n+\nuserId, fetcher)\n}, [userId])\nreturn\n(\n<\ndiv\n>\n<\nbutton\nonClick\n=\n{()\n=>\nsetShow\n(\ntrue\n)}\n{\n/* preload in event callbacks */\n}\nonHover\n=\n{()\n=>\npreload\n(\n'/api/user?id='\n+\nuserId, fetcher)}\n>\nShow User\n</\nbutton\n>\n{show\n?\n<\nUser\n/>\n:\nnull\n}\n</\ndiv\n>\n)\n}\nTogether with techniques like\npage prefetching\nin Next.js, you will be able to load both next page and data instantly.\nIn Suspense mode, you should utilize\npreload\nto avoid waterfall problems.\nimport\nuseSWR, { preload }\nfrom\n'swr'\n// should call before rendering\npreload\n(\n'/api/user'\n, fetcher);\npreload\n(\n'/api/movies'\n, fetcher);\nconst\nPage\n=\n()\n=>\n{\n// The below useSWR hooks will suspend the rendering, but the requests to `/api/user` and `/api/movies` have started by `preload` already,\n// so the waterfall problem doesn't happen.\nconst\n{\ndata\n:\nuser\n}\n=\nuseSWR\n(\n'/api/user'\n, fetcher, { suspense:\ntrue\n});\nconst\n{\ndata\n:\nmovies\n}\n=\nuseSWR\n(\n'/api/movies'\n, fetcher, { suspense:\ntrue\n});\nreturn\n(\n<\ndiv\n>\n<\nUser\nuser\n=\n{user} />\n<\nMovies\nmovies\n=\n{movies} />\n</\ndiv\n>\n);\n}\nPre-fill Data\nIf you want to pre-fill existing data into the SWR cache, you can use the\nfallbackData\noption. For example:\nuseSWR\n(\n'/api/data'\n, fetcher, { fallbackData: prefetchedData })\nIf SWR hasn't fetched the data yet, this hook will return\nprefetchedData\nas a fallback.\nYou can also configure this for all SWR hooks and multiple keys with\n<SWRConfig>\nand the\nfallback\noption. Check\nNext.js SSG and SSR\nfor more details.\nPre-fetch in React Server Components (RSC)\nWhen using Next.js App Router with React Server Components, you can prefetch data on the server and pass it to client components via\nSWRConfig\n. This approach allows you to leverage server-side data fetching while maintaining the benefits of SWR's client-side caching and revalidation.\nFor detailed information and examples, see the\nUsage with Next.js\ndocumentation.",
  "content_markdown": "# Prefetching Data\n\n## [Top-Level Page Data](#top-level-page-data)\n\nThere\u2019re many ways to prefetch the data for SWR. For top level requests, [`rel=\"preload\"`](https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content) is highly recommended:\n\n```\n<link rel=\"preload\" href=\"/api/data\" as=\"fetch\" crossorigin=\"anonymous\">\n```\n\nJust put it inside your HTML `<head>`. It\u2019s easy, fast and native.\n\nIt will prefetch the data when the HTML loads, even before JavaScript starts to download. All your incoming fetch requests with the same URL will reuse the result (including SWR, of course).\n\n## [Programmatically Prefetch](#programmatically-prefetch)\n\nSWR provides the `preload` API to prefetch the resources programmatically and store the results in the cache. `preload` accepts `key` and `fetcher` as the arguments.\n\nYou can call `preload` even outside of React.\n\n```\nimport { useState } from 'react'\nimport useSWR, { preload } from 'swr'\n\nconst fetcher = (url) => fetch(url).then((res) => res.json())\n\n// Preload the resource before rendering the User component below,\n// this prevents potential waterfalls in your application.\n// You can also start preloading when hovering the button or link, too.\npreload('/api/user', fetcher)\n\nfunction User() {\n  const { data } = useSWR('/api/user', fetcher)\n  ...\n}\n\nexport default function App() {\n  const [show, setShow] = useState(false)\n  return (\n    <div>\n      <button onClick={() => setShow(true)}>Show User</button>\n      {show ? <User /> : null}\n    </div>\n  )\n}\n```\n\nWithin React rendering tree, `preload` is also available to use in event handlers or effects.\n\n```\nfunction App({ userId }) {\n  const [show, setShow] = useState(false)\n\n  // preload in effects\n  useEffect(() => {\n    preload('/api/user?id=' + userId, fetcher)\n  }, [userId])\n\n  return (\n    <div>\n      <button\n        onClick={() => setShow(true)}\n        {/* preload in event callbacks */}\n        onHover={() => preload('/api/user?id=' + userId, fetcher)}\n      >\n        Show User\n      </button>\n      {show ? <User /> : null}\n    </div>\n  )\n}\n```\n\nTogether with techniques like [page prefetching](https://nextjs.org/docs/api-reference/next/router#routerprefetch) in Next.js, you will be able to load both next page and data instantly.\n\nIn Suspense mode, you should utilize `preload` to avoid waterfall problems.\n\n```\nimport useSWR, { preload } from 'swr'\n\n// should call before rendering\npreload('/api/user', fetcher);\npreload('/api/movies', fetcher);\n\nconst Page = () => {\n  // The below useSWR hooks will suspend the rendering, but the requests to `/api/user` and `/api/movies` have started by `preload` already,\n  // so the waterfall problem doesn't happen.\n  const { data: user } = useSWR('/api/user', fetcher, { suspense: true });\n  const { data: movies } = useSWR('/api/movies', fetcher, { suspense: true });\n  return (\n    <div>\n      <User user={user} />\n      <Movies movies={movies} />\n    </div>\n  );\n}\n```\n\n## [Pre-fill Data](#pre-fill-data)\n\nIf you want to pre-fill existing data into the SWR cache, you can use the `fallbackData` option. For example:\n\n```\nuseSWR('/api/data', fetcher, { fallbackData: prefetchedData })\n```\n\nIf SWR hasn't fetched the data yet, this hook will return `prefetchedData` as a fallback.\n\nYou can also configure this for all SWR hooks and multiple keys with `<SWRConfig>` and the `fallback` option. Check [Next.js SSG and SSR](/en/docs/with-nextjs) for more details.\n\n## [Pre-fetch in React Server Components (RSC)](#pre-fetch-in-rsc)\n\nWhen using Next.js App Router with React Server Components, you can prefetch data on the server and pass it to client components via `SWRConfig`. This approach allows you to leverage server-side data fetching while maintaining the benefits of SWR's client-side caching and revalidation.\n\nFor detailed information and examples, see the [Usage with Next.js](/en/docs/with-nextjs#prefetch-data-in-server-components) documentation.",
  "tags": [
    "swr",
    "vercel",
    "react",
    "data-fetching"
  ],
  "extracted_at": "2026-02-03T12:53:07.712996+00:00",
  "content_length": 3468,
  "content_hash": "6c50b61d88657f56"
}