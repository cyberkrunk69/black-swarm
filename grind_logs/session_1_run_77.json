{"complexity": "complex", "subtasks": [{"id": 1, "assigned_to": "CODER", "description": "Write a Python script `prune_experiments.py` that scans the `experiments/` directory and lists all experiment sub\u2011directories whose modification time is older than 24\u202fhours.", "acceptance_criteria": "The script prints a sorted list of qualifying directory paths. It must correctly exclude any directory whose latest modification timestamp is within the last 24\u202fhours."}, {"id": 2, "assigned_to": "CODER", "description": "Extend the script to inspect each qualifying experiment directory and decide if it contains useful output. Useful output is defined as at least one non\u2011empty file that is not an exact duplicate of a file in another experiment directory (use file size and SHA\u2011256 hash for duplicate detection).", "acceptance_criteria": "For each directory the script records a status: *keep* (has unique, non\u2011empty output) or *candidate\u2011delete* (empty or only duplicate files). The script must produce a JSON manifest mapping directory paths to their status."}, {"id": 3, "assigned_to": "CODER", "description": "Add deletion logic: safely delete directories marked as *candidate\u2011delete* while preserving a dry\u2011run mode (`--dry-run`) that only logs actions. The script must compute and report the total number of directories deleted, number kept, and total bytes freed.", "acceptance_criteria": "When run without `--dry-run`, the script deletes only the intended directories and prints a final summary: `X deleted, Y kept, Z bytes freed`. In dry\u2011run mode it prints the same summary without performing any deletions."}, {"id": 4, "assigned_to": "CODER", "description": "Implement robust safety checks: ensure no directory whose modification time is within the last 24\u202fhours is ever deleted, prompt the user for confirmation before any destructive action (unless `--force` is supplied), and log all actions to `prune_experiments.log` with timestamps.", "acceptance_criteria": "The script aborts with a clear error if a directory newer than 24\u202fhours is mistakenly targeted. All deletions (or dry\u2011run listings) are appended to `prune_experiments.log` with ISO\u20118601 timestamps."}, {"id": 5, "assigned_to": "CODER", "description": "Provide a concise README section at the top of `prune_experiments.py` explaining usage, options (`--dry-run`, `--force`), and safety guarantees.", "acceptance_criteria": "The script contains a docstring or comment block with usage examples and a description of the safety mechanisms."}], "next_role": "CODER", "critic_review": {"score": 1.0, "issues": [], "feedback": ["[OK] Code quality looks good!"], "passed": true, "timestamp": "2026-02-03T20:13:06.118209", "context": {"filename": "/app/grind_logs/session_1_run_77.json", "task": "PRUNE: experiments/ directory\n\nThere are 1824 experiment directories, most are garbage duplicates.\n\n1. List all experiments older than 24 hours\n2. Check which ones have actual useful output (non-empty, non-duplicate files)\n3. Delete empty or duplicate experiment directories\n4. Keep only experiments with unique, substantial output\n5. Report: X deleted, Y kept, Z bytes freed\n\nBE CAREFUL - don't delete anything from today.", "session_id": 1, "run": 77}}, "quality_score": 1.0, "critic_feedback": ["[OK] Code quality looks good!"], "critic_retry_count": 0}