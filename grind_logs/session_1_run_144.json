{"complexity": "complex", "subtasks": [{"id": 1, "assigned_to": "CODER", "description": "Scan the `experiments/` directory and produce a list of all experiment sub\u2011directories whose last\u2011modified timestamp is older than 24\u202fhours (exclude any directory modified today). Output the list to a variable or file.", "acceptance_criteria": "A Python function `list_old_experiments(root_path)` returns a list of absolute paths for all qualifying experiment directories; the list excludes any directory whose modification time is within the last 24\u202fh."}, {"id": 2, "assigned_to": "CODER", "description": "For each directory from step\u202f1, examine its contents to decide if it contains useful output: (a) at least one non\u2011empty file, and (b) the file(s) are not exact duplicates of files found in any other experiment directory. Compute a hash (e.g., SHA\u2011256) of each file to detect duplicates.", "acceptance_criteria": "A Python function `has_useful_output(dir_path, global_hashes)` returns `True` only when the directory contains \u22651 non\u2011empty file whose hash is unique across all examined experiments. The function updates `global_hashes` with hashes of files it deems unique."}, {"id": 3, "assigned_to": "CODER", "description": "Delete all experiment directories identified as (a) empty (no files) or (b) containing only duplicate files according to step\u202f2. Ensure the deletion is safe (use `shutil.rmtree`) and that no directory from today is removed.", "acceptance_criteria": "A Python routine `prune_experiments(old_dirs, useful_dirs)` removes only the unwanted directories and logs each deletion. After execution, the filesystem contains only the directories returned by step\u202f2."}, {"id": 4, "assigned_to": "CODER", "description": "Calculate and report statistics: total number of directories deleted (X), total number kept (Y), and total bytes freed on disk (Z). Produce a concise human\u2011readable summary string.", "acceptance_criteria": "A function `report_stats(deleted_dirs, kept_dirs)` returns a string like `\"Deleted X experiments, kept Y experiments, freed Z bytes\"` with accurate numbers matching the filesystem state after step\u202f3."}, {"id": 5, "assigned_to": "CODER", "description": "Wrap the above logic into a single executable Python script `prune_experiments.py` placed at the repository root. The script should be runnable (`python prune_experiments.py`) and perform all steps automatically, printing the final report.", "acceptance_criteria": "Running `python prune_experiments.py` executes the full workflow without errors, respects the 24\u2011hour safety window, deletes only the intended directories, and prints the correct summary. The script includes minimal inline documentation and uses only the Python standard library."}], "next_role": "CODER", "critic_review": {"score": 1.0, "issues": [], "feedback": ["[OK] Code quality looks good!"], "passed": true, "timestamp": "2026-02-03T20:18:58.002519", "context": {"filename": "/app/grind_logs/session_1_run_144.json", "task": "PRUNE: experiments/ directory\n\nThere are 1824 experiment directories, most are garbage duplicates.\n\n1. List all experiments older than 24 hours\n2. Check which ones have actual useful output (non-empty, non-duplicate files)\n3. Delete empty or duplicate experiment directories\n4. Keep only experiments with unique, substantial output\n5. Report: X deleted, Y kept, Z bytes freed\n\nBE CAREFUL - don't delete anything from today.", "session_id": 1, "run": 144}}, "quality_score": 1.0, "critic_feedback": ["[OK] Code quality looks good!"], "critic_retry_count": 0}